<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>与亓のBlog</title>
  
  
  <link href="http://blog.yuqi.fun/atom.xml" rel="self"/>
  
  <link href="http://blog.yuqi.fun/"/>
  <updated>2025-05-10T00:00:00.000Z</updated>
  <id>http://blog.yuqi.fun/</id>
  
  <author>
    <name>与亓</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>针对Prodiag现场License弹窗的解决方法</title>
    <link href="http://blog.yuqi.fun/undefined/2622eae5.html"/>
    <id>http://blog.yuqi.fun/undefined/2622eae5.html</id>
    <published>2025-05-10T00:00:00.000Z</published>
    <updated>2025-05-10T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>问题：触摸屏报缺少相关的License Key</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/20250510170721371.png" alt="image-20250510165712437"></p><p>打开2018版EKB秘钥（无法找到秘钥，请更换此2018秘钥）</p><p> <img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/20250510170736105.png" alt="image-20250510165723510"></p><p>选择此秘钥，安装长秘钥，</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/20250510170745318.png" alt="image-20250510165728998"></p><p>方法一：</p><p>打开软件</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/20250510170755265.png" alt="image-20250510165801227"></p><p>选择下图秘钥—</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/20250510170801052.png" alt="image-20250510165808104"></p><p>找到下图秘钥–右键点击Transfer</p><p>打开Tansfer 窗口，电脑与HMI屏幕连接后，可以找到需要下载的HMI设备（有具体IP地址），OK确认</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/20250510170807531.png" alt="image-20250510165818850"></p><p>方法二：也可以右键相关HMI的此属性，打开授权许可</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/20250510170813884.png" alt="image-20250510165826870"></p><p>找到相关HMI设备。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/20250510170821004.png" alt="image-20250510165833281"></p><p>注意：授权传送之后会提示成功，传送成功后授权若消失重新使用EKb安装一遍即可出现。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;问题：触摸屏报缺少相关的License Key&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/20250510170721371.png&quot; alt=&quot;imag</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>SEW Scope曲线监控</title>
    <link href="http://blog.yuqi.fun/undefined/c4294855.html"/>
    <id>http://blog.yuqi.fun/undefined/c4294855.html</id>
    <published>2025-01-05T00:00:00.000Z</published>
    <updated>2025-01-05T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="打开备份的SEW文件，点击Scope"><a href="#打开备份的SEW文件，点击Scope" class="headerlink" title="打开备份的SEW文件，点击Scope"></a>打开备份的SEW文件，点击Scope</h3><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202501051439031.png" alt="image-20250105143536600"></p><h3 id="进入Scope界面"><a href="#进入Scope界面" class="headerlink" title="进入Scope界面"></a>进入Scope界面</h3><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202501051439072.png" alt="image-20250105143550152"></p><h3 id="在菜单栏中点击新建文件按钮，并新创建一个模板"><a href="#在菜单栏中点击新建文件按钮，并新创建一个模板" class="headerlink" title="在菜单栏中点击新建文件按钮，并新创建一个模板"></a>在菜单栏中点击新建文件按钮，并新创建一个模板</h3><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202501051439108.png" alt="image-20250105143632298"></p><h3 id="模板中设置好监控选项，并保存为名称为Scope的-sct文件"><a href="#模板中设置好监控选项，并保存为名称为Scope的-sct文件" class="headerlink" title="模板中设置好监控选项，并保存为名称为Scope的.sct文件"></a>模板中设置好监控选项，并保存为名称为Scope的.sct文件</h3><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202501051439154.png" alt="image-20250105143656071"></p><h3 id="再次在Scope菜单栏中点击新建，在模板中选择我们创建的Scope模板，然后点OK，进入Scope监控界面"><a href="#再次在Scope菜单栏中点击新建，在模板中选择我们创建的Scope模板，然后点OK，进入Scope监控界面" class="headerlink" title="再次在Scope菜单栏中点击新建，在模板中选择我们创建的Scope模板，然后点OK，进入Scope监控界面"></a>再次在Scope菜单栏中点击新建，在模板中选择我们创建的Scope模板，然后点OK，进入Scope监控界面</h3><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202501051439188.png" alt="image-20250105143719967"></p><h3 id="进入Scope界面后点击记录设置，出现我们刚才设置的模板，点击Start按钮准备记录Scope曲线。在HMI上手动操作滑台动作就会自动触发记录运行曲线"><a href="#进入Scope界面后点击记录设置，出现我们刚才设置的模板，点击Start按钮准备记录Scope曲线。在HMI上手动操作滑台动作就会自动触发记录运行曲线" class="headerlink" title="进入Scope界面后点击记录设置，出现我们刚才设置的模板，点击Start按钮准备记录Scope曲线。在HMI上手动操作滑台动作就会自动触发记录运行曲线"></a>进入Scope界面后点击记录设置，出现我们刚才设置的模板，点击Start按钮准备记录Scope曲线。在HMI上手动操作滑台动作就会自动触发记录运行曲线</h3><p><strong>注意：根据模板里面的设置，最大记录时间为40.96s，因此来回滑动的时间需要控制在40s以内，否则超时的那部分运行曲线无法获取。如果需要调整最大记录时间，可以调整Sample Time。</strong></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202501051439213.png" alt="image-20250105143805277"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;打开备份的SEW文件，点击Scope&quot;&gt;&lt;a href=&quot;#打开备份的SEW文件，点击Scope&quot; class=&quot;headerlink&quot; title=&quot;打开备份的SEW文件，点击Scope&quot;&gt;&lt;/a&gt;打开备份的SEW文件，点击Scope&lt;/h3&gt;&lt;p&gt;&lt;img s</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>1panel面板部署哪吒监控v1</title>
    <link href="http://blog.yuqi.fun/undefined/aad1ff9e.html"/>
    <id>http://blog.yuqi.fun/undefined/aad1ff9e.html</id>
    <published>2025-01-03T00:00:00.000Z</published>
    <updated>2025-01-03T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="域名解析"><a href="#域名解析" class="headerlink" title="域名解析"></a>域名解析</h1><p>面板域名以<code>nezha.a.com</code>为例</p><p>Cloudflare中添加A记录<code>nezha.a.com</code>指向Dashboard 服务器 IP，开启小黄云。<code>a.com</code>域名设置页面——网络，选择开启WebSockets 和 gRPC ；SSL&#x2F;TLS模式选择完全（严格）。</p><h1 id="哪吒搭建"><a href="#哪吒搭建" class="headerlink" title="哪吒搭建"></a>哪吒搭建</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /opt/nezha &amp;&amp; cd /opt/nezha</span><br><span class="line">nano docker-compose.yml</span><br><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure><p>docker-compose.yml文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">services:</span><br><span class="line">  dashboard:</span><br><span class="line">    container_name: nezha-dashboard</span><br><span class="line">    image: ghcr.io/nezhahq/nezha:latest</span><br><span class="line">    restart: unless-stopped</span><br><span class="line">    volumes:</span><br><span class="line">      - ./dashboard/data:/dashboard/data</span><br><span class="line">    ports:</span><br><span class="line">      - 8008:8008</span><br></pre></td></tr></table></figure><h1 id="反代设置"><a href="#反代设置" class="headerlink" title="反代设置"></a>反代设置</h1><p>反代设置代码来源：<a href="https://www.nodeseek.com/jump?to=https://misaka.es/archives/42.html">https://misaka.es/archives/42.html</a></p><p>1panel面板中新建反向代理网站，<code>网站 —— 创建网站 —— 反向代理</code>，主域名填写<code>nezha.a.com</code>，代理地址填写<code>127.0.0.1:8008</code></p><p>证书页面自行设置Acme账户、DNS账户为<code>nezha.a.com</code>申请证书。</p><p>网站页面点击<code>nezha.a.com</code>进入网站设置，开启https。</p><p>点击配置文件，最下方添加以下代码，保存并重载。<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202501031701543.png" alt="image"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># upstream 配置</span><br><span class="line">upstream dashboard &#123;</span><br><span class="line">    keepalive 512; </span><br><span class="line">    server 127.0.0.1:8008; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>打开<code>网站 —— 反向代理 —— 源文</code>，使用以下代码替换原内容，点击确认。至此，反向代理设置完成。<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202501031701795.png" alt="image"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">location ^~ / &#123;</span><br><span class="line">    proxy_pass http://127.0.0.1:8008; </span><br><span class="line">    proxy_set_header Host $host; </span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr; </span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; </span><br><span class="line">    proxy_set_header REMOTE-HOST $remote_addr; </span><br><span class="line">    proxy_set_header Upgrade $http_upgrade; </span><br><span class="line">    proxy_set_header nz-realip $http_cf_connecting_ip;</span><br><span class="line">    proxy_set_header Connection &quot;upgrade&quot;;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">    proxy_http_version 1.1; </span><br><span class="line">    proxy_read_timeout 3600s;</span><br><span class="line">    proxy_send_timeout 3600s;</span><br><span class="line">    proxy_buffer_size 128k;</span><br><span class="line">    proxy_buffers 4 128k; </span><br><span class="line">    proxy_busy_buffers_size 256k;</span><br><span class="line">    proxy_max_temp_file_size 0;</span><br><span class="line">    add_header X-Cache $upstream_cache_status; </span><br><span class="line">    add_header Cache-Control no-cache; </span><br><span class="line">    proxy_ssl_server_name off; </span><br><span class="line">    proxy_ssl_name $proxy_host; </span><br><span class="line">    add_header Strict-Transport-Security &quot;max-age=31536000&quot;; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">underscores_in_headers on;</span><br><span class="line">set_real_ip_from 0.0.0.0/0; # CDN 回源 IP 地址段</span><br><span class="line">real_ip_header CF-Connecting-IP; # CDN 私有 header，此处为 CloudFlare 默认</span><br><span class="line"></span><br><span class="line"># gRPC 服务</span><br><span class="line">location ^~ /proto.NezhaService/ &#123;</span><br><span class="line">    grpc_set_header Host $host;</span><br><span class="line">    grpc_set_header nz-realip $http_CF_Connecting_IP; </span><br><span class="line">    grpc_read_timeout 600s;</span><br><span class="line">    grpc_send_timeout 600s;</span><br><span class="line">    grpc_socket_keepalive on;</span><br><span class="line">    client_max_body_size 10m;</span><br><span class="line">    grpc_buffer_size 4m;</span><br><span class="line">    grpc_pass grpc://dashboard;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># WebSocket 服务</span><br><span class="line">location ~* ^/api/v1/ws/(server|terminal|file)(.*)$ &#123;</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">    proxy_set_header nz-realip $http_cf_connecting_ip; </span><br><span class="line">    proxy_set_header Origin https://$host;</span><br><span class="line">    proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">    proxy_set_header Connection &quot;upgrade&quot;;</span><br><span class="line">    proxy_read_timeout 3600s;</span><br><span class="line">    proxy_send_timeout 3600s;</span><br><span class="line">    proxy_pass http://127.0.0.1:8008;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="面板设置"><a href="#面板设置" class="headerlink" title="面板设置"></a>面板设置</h1><p>登录到 Dashboard 配置界面<code>https://nezha.a.com/dashboard</code>，初始用户名、密码均为<code>admin</code>，登录后立即进入管理页面点击<code>头像 —— 个人信息 —— 更新个人资料</code>修改用户名和密码。</p><p>点击<code>头像 —— 系统设置</code>，填写站点名称、设置语言，<code>Agent对接地址【域名/IP:端口】</code>填写<code>nezha.a.com:443</code>，勾选<code>Agent 使用 TLS 连接</code>，点击<code>确认</code>即可。</p><p><strong>添加TCP-Ping延迟测试：</strong></p><p>全国各省份三网 TCP-Ping IPv4 地址：<a href="https://www.nodeseek.com/post-68572-1">https://www.nodeseek.com/post-68572-1</a></p><p>全国各省份三网 TCP-Ping IPv6 地址：<a href="https://www.nodeseek.com/post-129987-1">https://www.nodeseek.com/post-129987-1</a></p><p>以浙江移动为例，<code>服务</code>页面创建服务，名称：浙江移动，目标：<a href="https://www.nodeseek.com/jump?to=http://zj-cm-v4.ip.zstaticcdn.com:80">zj-cm-v4.ip.zstaticcdn.com:80</a>，类型：TCPing</p><p><strong>添加telegram通知：</strong></p><p><code>通知</code>页面点击“+”，创建通知，名称自定，URL填写<code>https://api.telegram.org/bot&lt;你的机器人Token&gt;/sendMessage?chat_id=&lt;你的用户ID&gt;&amp;text=#NEZHA#</code>，将 <code>&lt;你的机器人Token&gt;</code> 和 <code>&lt;你的用户ID&gt;</code> 替换为实际值。</p><p>获取 URL 参数<br>获取机器人 Token：与 <code>@BotFather </code>对话，发送<code>/newbot</code>创建新机器人，获取 Token。<br>获取用户 ID：与 <code>@userinfobot </code>对话，获取你的用户 ID。<br>与机器人对话：先与新创建的机器人发送一条消息，确保机器人可以发送消息给你。</p><p><code>分组</code>——<code>通知</code>，页面点击“+”，编辑通知分组，名称自定，<code>通知</code>勾选提前创建的telegram通知，确认即可。</p><p>警报规则参考<a href="https://www.nodeseek.com/jump?to=https://nezha.wiki/guide/notifications.html">哪吒官方文档</a>，以离线通知为例：</p><p><code>通知</code>——<code>警报规则</code>，点击“+”，创建警报规则，名称：<code>离线通知</code>，规则：<code>[&#123;&quot;Type&quot;: &quot;offline&quot;, &quot;Duration&quot;: 10&#125;]</code>，通知组：勾选</p><p>telegram通知，启用：勾选，点击确认。</p><p>面板设置完成，可至<code>服务器</code>页面，点击<code>安装命令</code>，根据系统选择安装命令前往被控vps运行。</p><p>注：被控端禁用网页SSH</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;s/disable_command_execute: false/disable_command_execute: true/&#x27; /opt/nezha/agent/config.yml &amp;&amp; systemctl restart nezha-agent</span><br></pre></td></tr></table></figure><h1 id="接入微软登录"><a href="#接入微软登录" class="headerlink" title="接入微软登录"></a>接入微软登录</h1><p>原wiki地址 <a href="https://www.nodeseek.com/jump?to=https://nezha.wiki/guide/q14.html">https://nezha.wiki/guide/q14.html</a></p><p>补充微软登陆</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">oauth2:</span></span><br><span class="line">    <span class="attr">Microsoft:</span></span><br><span class="line">        <span class="attr">clientid:</span> <span class="string">&quot;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX&quot;</span></span><br><span class="line">        <span class="attr">clientsecret:</span> <span class="string">&quot;XXXXX&quot;</span></span><br><span class="line">        <span class="attr">endpoint:</span></span><br><span class="line">            <span class="attr">authurl:</span> <span class="string">&quot;https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize&quot;</span></span><br><span class="line">            <span class="attr">tokenurl:</span> <span class="string">&quot;https://login.microsoftonline.com/consumers/oauth2/v2.0/token&quot;</span></span><br><span class="line">        <span class="attr">scopes:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">&quot;User.Read&quot;</span></span><br><span class="line">        <span class="attr">userinfourl:</span> <span class="string">&quot;https://graph.microsoft.com/v1.0/me&quot;</span></span><br><span class="line">        <span class="attr">useridpath:</span> <span class="string">&quot;id&quot;</span></span><br></pre></td></tr></table></figure><p>配置格式如上，需要自己注册应用以获得clientid、clientsecret</p><ol><li>注册<br><a href="https://www.nodeseek.com/jump?to=https://entra.microsoft.com/%23view/Microsoft_AAD_RegisteredApps/CreateApplicationBlade/quickStartType~/null/isMSAApp~/false">https://entra.microsoft.com/#view/Microsoft_AAD_RegisteredApps&#x2F;CreateApplicationBlade&#x2F;quickStartType<del>&#x2F;null&#x2F;isMSAApp</del>&#x2F;false</a><br>输入项：<br>名称 – 随便写<br>受支持的帐户类型 – 仅 Microsoft 个人帐户<br>重定向 URI (可选) – WEB <a href="https://www.nodeseek.com/jump?to=https://xx.com/api/v1/oauth2/callback">https://xx.com/api/v1/oauth2/callback</a></li><li>获得clientid<br><a href="https://www.nodeseek.com/jump?to=https://entra.microsoft.com/%23view/Microsoft_AAD_RegisteredApps/ApplicationsListBlade/quickStartType~/null/sourceType/Microsoft_AAD_IAM">https://entra.microsoft.com/#view/Microsoft_AAD_RegisteredApps&#x2F;ApplicationsListBlade&#x2F;quickStartType~&#x2F;null&#x2F;sourceType&#x2F;Microsoft_AAD_IAM</a><br>在最左边 所有应用程序 找到自己刚才注册的 点进去<br>概述页面有个 应用程序(客户端) ID，这个就是。</li><li>获得clientsecret<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202501031707326.png" alt="uS3yGRHdgnCIGTAi9IVkpS"><br>提交后会出现 一个 值，复制，后续会不可见。</li><li>修改配置文件 并且 重启 面板服务</li><li>在个人信息里面绑定即可</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;域名解析&quot;&gt;&lt;a href=&quot;#域名解析&quot; class=&quot;headerlink&quot; title=&quot;域名解析&quot;&gt;&lt;/a&gt;域名解析&lt;/h1&gt;&lt;p&gt;面板域名以&lt;code&gt;nezha.a.com&lt;/code&gt;为例&lt;/p&gt;
&lt;p&gt;Cloudflare中添加A记录&lt;code&gt;n</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>常用VPS脚本</title>
    <link href="http://blog.yuqi.fun/undefined/6469b43f.html"/>
    <id>http://blog.yuqi.fun/undefined/6469b43f.html</id>
    <published>2024-12-31T00:00:00.000Z</published>
    <updated>2024-12-31T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1、DD重装脚本"><a href="#1、DD重装脚本" class="headerlink" title="1、DD重装脚本"></a>1、DD重装脚本</h2><p>史上最强脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -qO InstallNET.sh &#x27;https://raw.githubusercontent.com/leitbogioro/Tools/master/Linux_reinstall/InstallNET.sh&#x27; &amp;&amp; chmod a+x InstallNET.sh &amp;&amp; bash InstallNET.sh -debian 12 -pwd &#x27;password&#x27;</span><br></pre></td></tr></table></figure><p>萌咖大佬的脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(wget --no-check-certificate -qO- &#x27;https://raw.githubusercontent.com/MoeClub/Note/master/InstallNET.sh&#x27;) -d 11 -v 64 -p 密码 -port 端口 -a -firmware</span><br></pre></td></tr></table></figure><p>beta.gs大佬的脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O NewReinstall.sh https://raw.githubusercontent.com/fcurrk/reinstall/master/NewReinstall.sh &amp;&amp; chmod a+x NewReinstall.sh &amp;&amp; bash NewReinstall.sh</span><br></pre></td></tr></table></figure><p>DD windows（使用史上最强DD脚本）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sSL https://raw.githubusercontent.com/leitbogioro/Tools/master/Linux_reinstall/InstallNET.sh) -windows 10  -lang &quot;cn&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">账户：Administrator</span><br><span class="line">密码：Teddysun.com</span><br></pre></td></tr></table></figure><h2 id="2、综合测试脚本"><a href="#2、综合测试脚本" class="headerlink" title="2、综合测试脚本"></a>2、综合测试脚本</h2><p>LemonBench</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- https://raw.githubusercontent.com/LemonBench/LemonBench/main/LemonBench.sh | bash -s -- --fast</span><br></pre></td></tr></table></figure><p>融合怪</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(wget -qO- --no-check-certificate https://gitlab.com/spiritysdx/za/-/raw/main/ecs.sh)</span><br></pre></td></tr></table></figure><p>NodeBench</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL https://raw.githubusercontent.com/LloydAsp/NodeBench/main/NodeBench.sh)</span><br></pre></td></tr></table></figure><h2 id="3、性能测试"><a href="#3、性能测试" class="headerlink" title="3、性能测试"></a>3、性能测试</h2><p>GB6 跑分脚本，附带宽测试：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sL yabs.sh | bash</span><br></pre></td></tr></table></figure><p>GB6 剔除带宽测试，因为都是国外节点测试，国内跑没多大意义：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sL yabs.sh | bash -s -- -i</span><br></pre></td></tr></table></figure><p>GB5 跑分脚本，附带宽测试：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sL yabs.sh | bash -5</span><br></pre></td></tr></table></figure><p>GB5 剔除带宽测试：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sL yabs.sh | bash -s -- -i -5</span><br></pre></td></tr></table></figure><h2 id="4、流媒体及IP质量测试"><a href="#4、流媒体及IP质量测试" class="headerlink" title="4、流媒体及IP质量测试"></a>4、流媒体及IP质量测试</h2><p>最常用版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s check.unlock.media)</span><br></pre></td></tr></table></figure><p>原生检测脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL Media.Check.Place)</span><br></pre></td></tr></table></figure><p>准确度最高</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L -s https://github.com/1-stream/RegionRestrictionCheck/raw/main/check.sh)</span><br></pre></td></tr></table></figure><p>IP质量体检脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL IP.Check.Place)</span><br></pre></td></tr></table></figure><h2 id="5、测速脚本"><a href="#5、测速脚本" class="headerlink" title="5、测速脚本"></a>5、测速脚本</h2><p>Speedtest</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL bash.icu/speedtest)</span><br></pre></td></tr></table></figure><p>Taier</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -sL res.yserver.ink/taier.sh)</span><br></pre></td></tr></table></figure><p>hyperspeed</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -Lso- https://bench.im/hyperspeed)</span><br></pre></td></tr></table></figure><p>全球测速</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sL network-speed.xyz | bash</span><br></pre></td></tr></table></figure><h2 id="6、回程测试"><a href="#6、回程测试" class="headerlink" title="6、回程测试"></a>6、回程测试</h2><p>直接显示回程（小白用这个）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://raw.githubusercontent.com/ludashi2020/backtrace/main/install.sh -sSf | sh</span><br></pre></td></tr></table></figure><p>回程详细测试（推荐）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate https://raw.githubusercontent.com/Chennhaoo/Shell_Bash/master/AutoTrace.sh &amp;&amp; chmod +x AutoTrace.sh &amp;&amp; bash AutoTrace.sh</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://ghproxy.com/https://raw.githubusercontent.com/vpsxb/testrace/main/testrace.sh -O testrace.sh &amp;&amp; bash testrace.sh</span><br></pre></td></tr></table></figure><h2 id="7、功能脚本"><a href="#7、功能脚本" class="headerlink" title="7、功能脚本"></a>7、功能脚本</h2><p>添加SWAP</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.moerats.com/usr/shell/swap.sh &amp;&amp; bash swap.sh</span><br></pre></td></tr></table></figure><p>Fail2ban</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate https://raw.githubusercontent.com/FunctionClub/Fail2ban/master/fail2ban.sh &amp;&amp; bash fail2ban.sh 2&gt;&amp;1 | tee fail2ban.log</span><br></pre></td></tr></table></figure><p>一键开启BBR，适用于较新的Debian、Ubuntu</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;net.core.default_qdisc=fq&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line">echo &quot;net.ipv4.tcp_congestion_control=bbr&quot; &gt;&gt; /etc/sysctl.conf</span><br><span class="line">sysctl -p</span><br><span class="line">sysctl net.ipv4.tcp_available_congestion_control</span><br><span class="line">lsmod | grep bbr</span><br></pre></td></tr></table></figure><p>多功能BBR安装脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate &quot;https://gist.github.com/zeruns/a0ec603f20d1b86de6a774a8ba27588f/raw/4f9957ae23f5efb2bb7c57a198ae2cffebfb1c56/tcp.sh&quot; &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh</span><br></pre></td></tr></table></figure><p>锐速&#x2F;BBRPLUS&#x2F;BBR2&#x2F;BBR3</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O tcpx.sh &quot;https://github.com/ylx2016/Linux-NetSpeed/raw/master/tcpx.sh&quot; &amp;&amp; chmod +x tcpx.sh &amp;&amp; ./tcpx.sh</span><br></pre></td></tr></table></figure><p>TCP窗口调优</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://sh.nekoneko.cloud/tools.sh -O tools.sh &amp;&amp; bash tools.sh</span><br></pre></td></tr></table></figure><p>添加warp</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N https://gitlab.com/fscarmen/warp/-/raw/main/menu.sh &amp;&amp; bash menu.sh [option] [lisence/url/token]</span><br></pre></td></tr></table></figure><p>25端口开放测试</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet smtp.aol.com 25</span><br></pre></td></tr></table></figure><h2 id="8、一键安装常用环境及软件"><a href="#8、一键安装常用环境及软件" class="headerlink" title="8、一键安装常用环境及软件"></a>8、一键安装常用环境及软件</h2><p>docker</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://get.daocloud.io/docker | sh</span><br></pre></td></tr></table></figure><p>Python</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -O https://raw.githubusercontent.com/lx969788249/lxspacepy/master/pyinstall.sh &amp;&amp; chmod +x pyinstall.sh &amp;&amp; ./pyinstall.sh</span><br></pre></td></tr></table></figure><p>iperf3</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install iperf3</span><br></pre></td></tr></table></figure><p>realm</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -L https://raw.githubusercontent.com/zhouh047/realm-oneclick-install/main/realm.sh) -i</span><br></pre></td></tr></table></figure><p>gost</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O gost.sh https://raw.githubusercontent.com/qqrrooty/EZgost/main/gost.sh &amp;&amp; chmod +x gost.sh &amp;&amp; ./gost.sh</span><br></pre></td></tr></table></figure><p>极光面板</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -fsSL https://raw.githubusercontent.com/Aurora-Admin-Panel/deploy/main/install.sh)</span><br></pre></td></tr></table></figure><p>哪吒监控</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://raw.githubusercontent.com/naiba/nezha/master/script/install.sh  -o nezha.sh &amp;&amp; chmod +x nezha.sh &amp;&amp; sudo ./nezha.sh</span><br></pre></td></tr></table></figure><p>WARP</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N https://gitlab.com/fscarmen/warp/-/raw/main/menu.sh &amp;&amp; bash menu.sh</span><br></pre></td></tr></table></figure><p>Aria2</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N git.io/aria2.sh &amp;&amp; chmod +x aria2.sh &amp;&amp; ./aria2.sh</span><br></pre></td></tr></table></figure><p>宝塔</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O install.sh http://v7.hostcli.com/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh</span><br></pre></td></tr></table></figure><p>PVE虚拟化</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(wget -qO- --no-check-certificate https://raw.githubusercontent.com/oneclickvirt/pve/main/scripts/build_backend.sh)</span><br></pre></td></tr></table></figure><p>Argox</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(wget -qO- https://raw.githubusercontent.com/fscarmen/argox/main/argox.sh)</span><br></pre></td></tr></table></figure><h2 id="9、综合功能脚本"><a href="#9、综合功能脚本" class="headerlink" title="9、综合功能脚本"></a>9、综合功能脚本</h2><p>科技lion</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt update -y  &amp;&amp; apt install -y curl</span><br><span class="line"></span><br><span class="line">bash &lt;(curl -sL kejilion.sh)</span><br></pre></td></tr></table></figure><p>SKY-BOX</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O box.sh https://raw.githubusercontent.com/BlueSkyXN/SKY-BOX/main/box.sh &amp;&amp; chmod +x box.sh &amp;&amp; clear &amp;&amp; ./box.sh</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;1、DD重装脚本&quot;&gt;&lt;a href=&quot;#1、DD重装脚本&quot; class=&quot;headerlink&quot; title=&quot;1、DD重装脚本&quot;&gt;&lt;/a&gt;1、DD重装脚本&lt;/h2&gt;&lt;p&gt;史上最强脚本&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Qexo 一个美观、强大的在线 静态博客 管理器</title>
    <link href="http://blog.yuqi.fun/undefined/8277e0e6.html"/>
    <id>http://blog.yuqi.fun/undefined/8277e0e6.html</id>
    <published>2024-12-29T00:00:00.000Z</published>
    <updated>2024-12-29T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p><strong>Hexo</strong> 是一款快速、高效的静态博客框架。通过 <a href="http://daringfireball.net/projects/markdown/">Markdown</a> 语法，只需几秒便可生成高质量的静态网页。</p><p>最近，我成功实现了在多设备间灵活管理博客并发布内容。一位网友提到 <strong>Qexo</strong>，一个为 Hexo 增加后台功能的工具，它让发布博客变得像发微博一样简单。深入了解后，我发现它非常强大，不仅可以用手机随时随地发表文章，还极大提升了操作便捷性。</p><p>尽管安装过程中遇到了一些问题，但最终都顺利解决。我将整理经验分享，希望能帮助更多人。</p><hr><h1 id="Qexo-简介"><a href="#Qexo-简介" class="headerlink" title="Qexo 简介"></a>Qexo 简介</h1><p><strong>Qexo</strong> 是一个快速、美观且功能丰富的在线 Hexo 管理器，支持通过 Vercel 免费部署，仅需配置一个数据库即可使用。</p><h2 id="主要功能"><a href="#主要功能" class="headerlink" title="主要功能"></a>主要功能</h2><ul><li>自定义图床上传图片</li><li>在线编辑与页面管理</li><li>开放 API 接口</li><li>自动检查更新并一键更新</li><li>快速管理友情链接</li><li>短文分享（类似微博功能）</li><li>自动填充文章模板</li></ul><p><strong>项目地址</strong>：<a href="https://www.oplog.cn/qexo/start.html">Qexo 官方文档</a></p><hr><h1 id="一、配置-GitHub-自动化部署"><a href="#一、配置-GitHub-自动化部署" class="headerlink" title="一、配置 GitHub 自动化部署"></a>一、配置 GitHub 自动化部署</h1><h2 id="1-获取-GitHub-Token"><a href="#1-获取-GitHub-Token" class="headerlink" title="1. 获取 GitHub Token"></a>1. 获取 GitHub Token</h2><ol><li>打开 <strong>Personal settings</strong> -&gt; <strong>Developer settings</strong> -&gt; <strong>Personal access tokens</strong></li><li>设置权限为 <strong>repo</strong> 和 <strong>public repo</strong></li></ol><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202412291101351.png" alt="313f2ca0d7d3ea811d7e7be8ad6bcd4b"></p><ol><li>保存生成的 Token（丢失后无法恢复，只能重新生成）</li><li>在博客代码仓库的 <strong>Secrets</strong> 中添加名为 <strong>PERSONAL_TOKEN</strong> 的变量，后续步骤将用到。</li></ol><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202412291102866.png" alt="f69e8dd9266ba1336ddddff00a67ffc6"></p><h2 id="2-创建-GitHub-Actions"><a href="#2-创建-GitHub-Actions" class="headerlink" title="2. 创建 GitHub Actions"></a>2. 创建 GitHub Actions</h2><ol><li>在博客仓库页面，点击 <strong>Actions</strong>。</li><li>选择 <strong>Set up a workflow yourself</strong>。</li></ol><p><a href="https://13fe9ff.webp.li/2024/11/b425061c44375abea8ca5a8a01091038.png"><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202412291104224.png" alt="img"></a></p><ol><li>输入以下 YAML 配置并点击 <strong>Start commit</strong> ：</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">Hexo</span> <span class="string">to</span> <span class="string">GitHub</span> <span class="string">Pages</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span> <span class="comment"># 或你使用的默认分支名称</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">deploy:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">blog</span> <span class="string">source</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">blog</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&quot;16&quot;</span> <span class="comment"># 设置 Node.js 版本</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/cache@v2</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">path:</span> <span class="string">node_modules</span></span><br><span class="line">          <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-node-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/package-lock.json&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">restore-keys:</span> <span class="string">|</span></span><br><span class="line"><span class="string">            $&#123;&#123; runner.os &#125;&#125;-node-</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">dependencies</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">        <span class="attr">working-directory:</span> <span class="string">./blog</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Hexo</span> <span class="string">CLI</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">hexo-cli</span></span><br><span class="line">        <span class="attr">working-directory:</span> <span class="string">./blog</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">static</span> <span class="string">pages</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">hexo</span> <span class="string">generate</span></span><br><span class="line">        <span class="attr">working-directory:</span> <span class="string">./blog</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">GitHub</span> <span class="string">Pages</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">peaceiris/actions-gh-pages@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">personal_token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.PERSONAL_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">publish_dir:</span> <span class="string">./blog/public</span></span><br><span class="line">          <span class="attr">external_repository:</span> <span class="string">username/username.github.io</span> <span class="comment"># 更改为你的 GitHub Pages 仓库, username 是你的用户名</span></span><br><span class="line">          <span class="attr">publish_branch:</span> <span class="string">main</span> <span class="comment"># GitHub Pages 分支</span></span><br></pre></td></tr></table></figure><p>参考文档：</p><ul><li><a href="https://www.oplog.cn/archives/24998.html">Hexo 自动化部署教程</a></li><li><a href="https://hackergavin.com/2024/01/11/hexo-automate-deploy/">利用 GitHub Actions 实现自动化部署 Hexo 到 Github Pages</a></li></ul><hr><h1 id="二、通过-Vercel-部署-Qexo"><a href="#二、通过-Vercel-部署-Qexo" class="headerlink" title="二、通过 Vercel 部署 Qexo"></a>二、通过 Vercel 部署 Qexo</h1><h2 id="1-一键部署"><a href="#1-一键部署" class="headerlink" title="1. 一键部署"></a>1. 一键部署</h2><p>点击以下按钮完成一键部署：<a href="https://vercel.com/new/clone?repository-url=https://github.com/am-abudu/Qexo">Vercel 一键部署</a></p><blockquote><p><strong>注意</strong>：首次部署可能会出现错误提示，可忽略并继续后续步骤。</p></blockquote><h2 id="2-修改-Node-js-版本"><a href="#2-修改-Node-js-版本" class="headerlink" title="2. 修改 Node.js 版本"></a>2. 修改 Node.js 版本</h2><p>由于 <strong><a href="https://vercel.com/docs/functions/runtimes/python#python-dependencies">Vercel 的已知问题</a>，需将项目的 Node.js 版本调整为</strong> <strong>18.x</strong>。<br>路径：<strong>Settings -&gt; General -&gt; Node.js Version</strong></p><h2 id="3-创建-Vercel-数据库"><a href="#3-创建-Vercel-数据库" class="headerlink" title="3. 创建 Vercel 数据库"></a>3. 创建 Vercel 数据库</h2><ol><li>进入<a href="https://vercel.com/dashboard/stores">Vercel Storage 页面</a>。</li><li>点击 *<strong>Create Database</strong>，选择 <strong>Neon</strong> ，设置区域为 <strong>Washington, DC., USA - iad1</strong>，创建免费数据库。</li></ol><h2 id="4-绑定项目"><a href="#4-绑定项目" class="headerlink" title="4. 绑定项目"></a>4. 绑定项目</h2><p>在 <strong>Projects</strong> 页面选择对应项目，点击 <strong>Connect Project</strong> 进行绑定。</p><h2 id="5-部署-Qexo"><a href="#5-部署-Qexo" class="headerlink" title="5. 部署 Qexo"></a>5. 部署 Qexo</h2><p>回到项目页面，点击<strong>Redeploy</strong> 开始部署。部署完成后，无报错即可访问域名进入初始化页面。</p><hr><h1 id="初始化配置"><a href="#初始化配置" class="headerlink" title="初始化配置"></a>初始化配置</h1><p><a href="https://13fe9ff.webp.li/2024/11/d14a6a28fa42dc905ad1f9572d280abb.png"><img src="https://13fe9ff.webp.li/2024/11/d14a6a28fa42dc905ad1f9572d280abb.png" alt="img"></a></p><p><a href="https://13fe9ff.webp.li/2024/11/8781b5e062a34509ccf39ed0000e8033.png"><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202412291104276.png" alt="img"></a></p><h2 id="GitHub-配置"><a href="#GitHub-配置" class="headerlink" title="GitHub 配置"></a>GitHub 配置</h2><p><a href="https://13fe9ff.webp.li/2024/11/7f4e9a472b66f4a2b73ae1c8e035b4ef.png"><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202412291104301.png" alt="img"></a><br>填写博客源码所在仓库的分支名称，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plaintext</span><br><span class="line">master</span><br></pre></td></tr></table></figure><h2 id="GitHub-密钥"><a href="#GitHub-密钥" class="headerlink" title="GitHub 密钥"></a>GitHub 密钥</h2><p>填写生成的 GitHub Token，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plaintext</span><br><span class="line">wrq_P8sYPlYA9fjMlOPEYSKA84xxxxxxxxxxxxxx</span><br></pre></td></tr></table></figure><h2 id="仓库路径"><a href="#仓库路径" class="headerlink" title="仓库路径"></a>仓库路径</h2><p>若 Hexo 源码在仓库根目录，则留空；否则填写路径：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plaintext</span><br><span class="line">path/</span><br></pre></td></tr></table></figure><p><a href="https://13fe9ff.webp.li/2024/11/f2f7c6b57196afa6652292807698db91.png"><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202412291104319.png" alt="img"></a></p><p><a href="https://13fe9ff.webp.li/2024/11/5e4c876cd000a6d5f5da45bb256c963e.png"><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202412291104350.png" alt="img"></a></p><p><a href="https://13fe9ff.webp.li/2024/11/bcc3ab289c7a355ed8116d92faddba80.png"><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202412291104386.png" alt="img"></a></p><h2 id="Vercel-配置"><a href="#Vercel-配置" class="headerlink" title="Vercel 配置"></a>Vercel 配置</h2><ul><li><strong>VERCEL_TOKEN</strong>：在<a href="https://vercel.com/account/tokens">Vercel 账户设置</a> 中生成。</li><li><strong>PROJECT_ID</strong>：在 <strong>Project Settings -&gt; General -&gt; Project ID</strong> 中找到。</li></ul><p>配置完成后，即可登录后台管理博客内容。</p><p><a href="https://13fe9ff.webp.li/2024/11/df6b8e762d048854683e5e31f6e262f2.png"><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202412291104412.png" alt="img"></a></p><p><a href="https://13fe9ff.webp.li/2024/11/2fa7cd4b16b469345b8e628d88affae2.png"><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202412291104441.png" alt="img"></a></p><p><a href="https://13fe9ff.webp.li/2024/11/6a16b8185a435cf9b807dbcc894d92e1.png"><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202412291104466.png" alt="img"></a></p><h1 id=""><a href="#" class="headerlink" title=""></a></h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;Hexo&lt;/strong&gt; 是一款快速、高效的静态博客框架。通过 &lt;a href=&quot;http://daringfirebal</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>贵阳吉利程序解析</title>
    <link href="http://blog.yuqi.fun/undefined/57946227.html"/>
    <id>http://blog.yuqi.fun/undefined/57946227.html</id>
    <published>2024-11-28T00:00:00.000Z</published>
    <updated>2024-12-28T05:34:56.377Z</updated>
    
    <content type="html"><![CDATA[<h1 id="程序框架"><a href="#程序框架" class="headerlink" title="程序框架"></a>程序框架</h1><p><strong>_00_Organization_Blocks</strong>：系统组织块</p><p><strong>_01_Initialization</strong>：初始化</p><p><strong>_02_HMI_OperationModes</strong>：HMI操作模式</p><p><strong>_07_Diagnosis</strong>：诊断</p><p><strong>LINE</strong>：功能块</p><p><strong>Main Call</strong>：模式区主调用</p><p><strong>MSG</strong>：模式区报警</p><p>工装</p><p><strong>Robot Zone Config</strong>：机器人干涉区配置</p><p>机器人</p><p><strong>Safety</strong>：安全程序</p><p><strong>ANDON</strong>：安东</p><p><strong>DB_USER</strong>：用户DB</p><p><strong>FC_User</strong>：用户FC</p><p><strong>SICAR</strong>：功能块</p><p><strong>Types_yixin</strong>：功能块</p><p>全局DB</p><h1 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h1><h2 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h2><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411222031727.png" alt="image-20241122203142738"></p><h2 id="注意项"><a href="#注意项" class="headerlink" title="注意项"></a>注意项</h2><h3 id="区域光栅"><a href="#区域光栅" class="headerlink" title="区域光栅"></a>区域光栅</h3><p>直接光栅复位按钮复位，用光栅对应的MLT信号做屏蔽</p><h3 id="急停"><a href="#急停" class="headerlink" title="急停"></a>急停</h3><p>需要对应模式区的安全门关好才可以复位，HMI急停需要所有安全门关好才可以复位</p><h3 id="相邻区域安全"><a href="#相邻区域安全" class="headerlink" title="相邻区域安全"></a>相邻区域安全</h3><p>区域光栅是好的就屏蔽掉相邻工位的急停和安全门</p><h3 id="安全供电"><a href="#安全供电" class="headerlink" title="安全供电"></a>安全供电</h3><p>安全条件满足就供安全电</p><h3 id="机器人安全"><a href="#机器人安全" class="headerlink" title="机器人安全"></a>机器人安全</h3><p>照着功能块填引脚即可</p><h3 id="安全门"><a href="#安全门" class="headerlink" title="安全门"></a>安全门</h3><p>关好门按复位即可</p><h3 id="光栅区扫"><a href="#光栅区扫" class="headerlink" title="光栅区扫"></a>光栅区扫</h3><p>直接光栅区扫复位按钮复位，用光栅对应的MLT信号做屏蔽</p><h1 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h1><h2 id="User-Interface-IN"><a href="#User-Interface-IN" class="headerlink" title="User_Interface_IN"></a>User_Interface_IN</h2><p><strong>H_OpMode</strong>：区域急停信号（区域报警MSG里面产生）</p><p><strong>M_OpMode</strong>：区域安全门信号（区域报警MSG里面产生）</p><p><strong>BasicStartCondition</strong>：基本启动条件（上电、急停安全门等OK）</p><p><strong>Pos_ImmediateStop</strong>：立即停止</p><p><strong>Pos_StopEndCycle</strong>：循环停止</p><p><strong>Pos_InitialPos</strong>：原位</p><p><strong>Pos_OpenDoor</strong>：开门条件</p><p><strong>Alarm</strong>：报警</p><h1 id="工装"><a href="#工装" class="headerlink" title="工装"></a>工装</h1><h2 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h2><p><strong>Station_No</strong>：工位号（不可重复）</p><p><strong>Name</strong>：工位名</p><p><strong>ActiveCarType</strong>：是否激活车型</p><p><strong>MsgWord</strong>：报警起始字（填多少在HMI报警里面就从报警字X16的地址开始找，关联到DB31的ERR_W）</p><h2 id="操作盒"><a href="#操作盒" class="headerlink" title="操作盒"></a>操作盒</h2><p><strong>PBStart</strong>：通过工位号和操作盒号来寻址得到</p><h2 id="车型条件"><a href="#车型条件" class="headerlink" title="车型条件"></a>车型条件</h2><p><strong>CanDO</strong>：不满足时自动完成当前指针</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411241457382.png" alt="image-20241124145708336"></p><h2 id="传感器"><a href="#传感器" class="headerlink" title="传感器"></a>传感器</h2><p><strong>YX12_Part04_SI</strong>：传感器配置块（填有几个传感器，以及对应的信号）</p><p><strong>YX12_Part04_CFG</strong>：传感器状态块（配置当前工件编号（可用来区分不同车型需要用到的传感器），名字，<strong>Mask</strong>：正必为真，负必为假，0为不判断）</p><h2 id="工位自动程序"><a href="#工位自动程序" class="headerlink" title="工位自动程序"></a>工位自动程序</h2><p><strong>自动步尾文件</strong>：需要配置<strong>Max_S_No</strong>为Graph里面最大的步号，不然会影响HMI画面的显示</p><h2 id="气缸"><a href="#气缸" class="headerlink" title="气缸"></a>气缸</h2><p><strong>OBJ_No</strong>：第几个气缸</p><p><strong>Home_FWD</strong>     <strong>Home_BWD</strong>：气缸在什么位置为原位</p><p><strong>CC_FWD</strong>     <strong>CC_BWD</strong>：气缸互锁条件</p><p><strong>NumFWD</strong>    <strong>NumBWD</strong>：伸出缩回有几个传感器</p><p><strong>自动命令都是直接给到相应的背景DB里面的</strong></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202412060942646.jpg" alt="mmexport1733381636905"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202412060942339.jpg" alt="mmexport1733381638785"></p><h1 id="机器人"><a href="#机器人" class="headerlink" title="机器人"></a>机器人</h1><h2 id="干涉区配置"><a href="#干涉区配置" class="headerlink" title="干涉区配置"></a>干涉区配置</h2><p>预留16个干涉区可以配置</p><p><strong>Zone_No</strong>：干涉区编号,1-64</p><p><strong>Group_No</strong>：分组编号，每干涉区1-7个分组</p><p><strong>Rbt_No</strong>：使用此干涉区分组的全局唯一机器人编号</p><p><strong>Robot Zone Config最后一段</strong></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411232118218.png" alt="lQLPJv-xoZjBRrXNA5_NBMGwcPS1H1Hy8mgHJ13FDetXAA_1217_927"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411232119180.png" alt="3992cc222d6053827c4fd067201c547e"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411232119734.png" alt="5dbddaf77fdeede3327ad7701238b5f4"></p><h2 id="头文件-1"><a href="#头文件-1" class="headerlink" title="头文件"></a>头文件</h2><p><strong>RBT_No</strong>：机器人编号（不可重复）</p><p><strong>Name</strong>：机器人名称</p><p><strong>ActiveCarType</strong>：是否激活车型</p><p><strong>MsgWord</strong>：报警起始字（填多少在HMI报警里面就从报警字X16的地址开始找，关联到DB31的ERR_W）</p><h2 id="车型条件-1"><a href="#车型条件-1" class="headerlink" title="车型条件"></a>车型条件</h2><p><strong>CanDO</strong>：不满足时自动完成当前指针</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411241457382.png" alt="image-20241124145708336"></p><h2 id="轨迹段进入编号"><a href="#轨迹段进入编号" class="headerlink" title="轨迹段进入编号"></a>轨迹段进入编号</h2><p><strong>YX09_RBT_SEG</strong>：10个轨迹段 进入工位编号（全局编号1-50），&lt; 0为与工位无关或不比对车型</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411241519872.png" alt="img"></p><h1 id="订单消耗方式"><a href="#订单消耗方式" class="headerlink" title="订单消耗方式"></a>订单消耗方式</h1><p>FC1061    55段</p><p><strong>CanDO</strong></p><p><strong>WorkDone</strong>&#x3D;<strong>CycleFinish</strong></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411232118947.png" alt="lQLPKHtxhR0Mcq3NA7TNBwKw1LGGsFn66VsHJoT6gosnAA_1794_948"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411232118949.png" alt="lQLPJyCXjWlXwW3NA8DNB16wjeqcDDPadp4HJoX6ffQgAA_1886_960"></p><p><strong>机器人完成的两种方式</strong></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411232118013.png" alt="58b13f519e1f2c0683f8023456b0c6f7"></p><h1 id="注意项-1"><a href="#注意项-1" class="headerlink" title="注意项"></a>注意项</h1><h2 id="复制HMI时注意更改变量"><a href="#复制HMI时注意更改变量" class="headerlink" title="复制HMI时注意更改变量"></a>复制HMI时注意更改变量</h2><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411232118744.png" alt="img"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411241538795.png" alt="image-20241124153800238"></p><h2 id="车型下发"><a href="#车型下发" class="headerlink" title="车型下发"></a>车型下发</h2><p>DB31    PIS</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411241521830.png" alt="image-20241124152128605"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411241521719.png" alt="e739d18a14c4b0d2ce600a075e30dfef"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411241522739.png" alt="d2bc26b41eeffd610cbe2e14b645f283"></p><h2 id="指针寻址找写入点方法"><a href="#指针寻址找写入点方法" class="headerlink" title="指针寻址找写入点方法"></a>指针寻址找写入点方法</h2><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411241535437.png" alt="image-20241124152944611"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411241535985.png" alt="image-20241124153050321"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411241536675.png" alt="image-20241124153306459"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202411241536972.png" alt="image-20241124153505708"></p><h1 id="画面"><a href="#画面" class="headerlink" title="画面"></a>画面</h1>]]></content>
    
    
    <summary type="html">贵阳吉利面试专用小抄，不会的进来看看...</summary>
    
    
    
    
  </entry>
  
  <entry>
    <title>安装了VMware Tools，但无法实现文件的拖拽和复制粘贴---解决方案</title>
    <link href="http://blog.yuqi.fun/undefined/a580ef34.html"/>
    <id>http://blog.yuqi.fun/undefined/a580ef34.html</id>
    <published>2024-04-05T00:00:00.000Z</published>
    <updated>2024-04-05T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>环境：Windows11，VMware17Pro，ubuntu-23.10.1</p><p>我给虚拟机装好Ubuntu系统后，它默认是安装好vmtools的</p><p>而且这些选项默认是勾选的，但是我无法实现宿主机和虚拟机之间文件的拖拽和复制粘贴</p><p>如果你遇到了和我一样的问题，且网上很多博文提供的解决方案都无法解决你的问题，那么请往下看</p><p>我试了各路大神的解决方案，基本都行不通</p><p>只有一篇标题和这个问题相关度不高的文章，提到了一种重装VMware tools的方法，我试了一下终于解决了问题</p><p> 这里要说一下，网上的很多文章用cd里带的VMware tools压缩包来重新安装（还要手动输yes的那个方法），我试了，根本没有用</p><p>毕竟初始安装的就是那个版本，再重新安装一下并没有意义</p><p>真正的解决方案其实很方便：</p><p>打开终端</p><p>1.卸载VMware Tools</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get autoremove open-vm-tools</span><br></pre></td></tr></table></figure><p>2.联网安装VMware tools</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install open-vm-tools-desktop</span><br></pre></td></tr></table></figure><p>如果出错了，就执行下面两行命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install open-vm-tools-desktop fuse</span><br></pre></td></tr></table></figure><p>3.重启虚拟机即可</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;环境：Windows11，VMware17Pro，ubuntu-23.10.1&lt;/p&gt;
&lt;p&gt;我给虚拟机装好Ubuntu系统后，它默认是安装好vmtools的&lt;/p&gt;
&lt;p&gt;而且这些选项默认是勾选的，但是我无法实现宿主机和虚拟机之间文件的拖拽和复制粘贴&lt;/p&gt;
&lt;p&gt;如果你</summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="虚拟机" scheme="http://blog.yuqi.fun/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>在WSL2中使用Clash Verge代理连接</title>
    <link href="http://blog.yuqi.fun/undefined/af89448b.html"/>
    <id>http://blog.yuqi.fun/undefined/af89448b.html</id>
    <published>2023-12-13T00:00:00.000Z</published>
    <updated>2024-01-12T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本文撰写时基于的系统和版本是 Ubuntu 22.04, 如果你使用其他版本或其他发行版，则下文提到的部分步骤与你的实际情况可能有所出入。</p></blockquote><blockquote><p>在 WSL2 中配置环境时，依赖下载经常因为网络问题极其缓慢甚至失败。在整合了各方资料及个人实践后，我总结了在 WSL2 中通过 Clash Verge 设置代理的方法，供大家参考。</p></blockquote><h1 id="在-Clash-客户端内的操作"><a href="#在-Clash-客户端内的操作" class="headerlink" title="在 Clash 客户端内的操作"></a>在 Clash 客户端内的操作</h1><p>打开客户端的局域网连接开关。<br>记录下客户端内的端口，如这里是 <code>7897</code>. 一般默认端口为 <code>7897</code>。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312131053554.png"></p><h1 id="修改-bashrc"><a href="#修改-bashrc" class="headerlink" title="修改 .bashrc"></a>修改 <code>.bashrc</code></h1><p>使用文本编辑器编辑 <code>.bashrc</code>，在文件末尾根据第 1 步记录的数据，加入三行内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano ~/.bashrc</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">host_ip=$(<span class="built_in">cat</span> /etc/resolv.conf |grep <span class="string">&quot;nameserver&quot;</span> |<span class="built_in">cut</span> -f 2 -d <span class="string">&quot; &quot;</span>)</span><br><span class="line"><span class="built_in">export</span> http_proxy=<span class="string">&quot;http://<span class="variable">$host_ip</span>:[端口]&quot;</span></span><br><span class="line"><span class="built_in">export</span> https_proxy=<span class="string">&quot;http://<span class="variable">$host_ip</span>:[端口]&quot;</span></span><br></pre></td></tr></table></figure><p>如图所示，修改完后保存即可。<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312131053167.png"></p><h1 id="使-root-用户保留先前设置的环境变量"><a href="#使-root-用户保留先前设置的环境变量" class="headerlink" title="使 root 用户保留先前设置的环境变量"></a>使 root 用户保留先前设置的环境变量</h1><p>在使用 <code>sudo</code> 执行命令时，之前设置的环境变量并不会生效，需要进一步设置。<br>输入 <code>sudo visudo</code></p><p>取消相应行的注释 (删除行首的 <code>#</code>) 即可.<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312131053399.png"></p><p>如果你使用 Ubuntu 20.04, 加入以下内容并保存。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Defaults env_keep=<span class="string">&quot;http_proxy https_proxy&quot;</span></span><br></pre></td></tr></table></figure><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312131053583.png"></p><h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><p>输入 <code>source ~/.bashrc</code> 使文件修改生效。</p><p>可以通过输入 <code>echo $http_proxy</code> 验证修改是否成功。<br>输入 <code>wget www.google.com</code>, 可以发现连接成功，至此大功告成，如图所示。<br><img src="https://s2.loli.net/2022/10/05/UIQ8LhuROaXq6S2.png"></p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://zhuanlan.zhihu.com/p/153124468">为 WSL2 一键设置代理 (zhihu.com)</a><br><a href="https://www.chenyudong.com/archives/sudo-keep-env.html">sudo保持前用用户的env环境变量 (chenyudong.com, 已失效)</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;本文撰写时基于的系统和版本是 Ubuntu 22.04, 如果你使用其他版本或其他发行版，则下文提到的部分步骤与你的实际情况可能有所出入。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;在 WSL2 中配置环境时，依赖下载经常</summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="科学上网" scheme="http://blog.yuqi.fun/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
  </entry>
  
  <entry>
    <title>Clash Verge规则配置</title>
    <link href="http://blog.yuqi.fun/undefined/97aa67fb.html"/>
    <id>http://blog.yuqi.fun/undefined/97aa67fb.html</id>
    <published>2023-12-12T00:00:00.000Z</published>
    <updated>2023-12-12T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="下载Clash-Meta内核客户端"><a href="#下载Clash-Meta内核客户端" class="headerlink" title="下载Clash.Meta内核客户端"></a>下载Clash.Meta内核客户端</h1><ul><li><a href="https://github.com/zzzgydi/clash-verge">Clash Verge 下载地址</a></li></ul><h1 id="本地配置（推荐）"><a href="#本地配置（推荐）" class="headerlink" title="本地配置（推荐）"></a>本地配置（推荐）</h1><blockquote><p>以处<code>Clash Verge</code>为例</p></blockquote><h4 id="0-设置内核为-Clash-Meta"><a href="#0-设置内核为-Clash-Meta" class="headerlink" title="0.设置内核为 Clash.Meta"></a>0.设置内核为 <code>Clash.Meta</code></h4><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312120915849.png" alt="0"></p><h2 id="下载配置文件ClashVerge-yaml文件到本地"><a href="#下载配置文件ClashVerge-yaml文件到本地" class="headerlink" title="下载配置文件ClashVerge.yaml文件到本地"></a>下载配置文件<code>ClashVerge.yaml</code>文件到本地</h2><ul><li>ClashVerge.yaml</li></ul><ul><li><input checked="" disabled="" type="checkbox"> 地区分流（香港、美国、日本、台湾、新加坡）</li><li><input checked="" disabled="" type="checkbox"> 苹果、谷歌、微软、电报、推特分流</li><li><input checked="" disabled="" type="checkbox"> 流媒体（不支持单独分流）</li><li><input checked="" disabled="" type="checkbox"> 自动选择最低延迟</li><li><input disabled="" type="checkbox"> 负载均衡</li><li><input checked="" disabled="" type="checkbox"> 故障转移</li><li><input checked="" disabled="" type="checkbox"> 广告屏蔽</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/Repcz/Tool/X/Clash/Meta/ClashVerge.yaml</span><br></pre></td></tr></table></figure><h2 id="修改配置-proxy-providers-中的机场订阅地址"><a href="#修改配置-proxy-providers-中的机场订阅地址" class="headerlink" title="修改配置 proxy-providers 中的机场订阅地址"></a>修改配置 <code>proxy-providers</code> 中的机场订阅地址</h2><ul><li>请自行将 <code>proxy-providers</code> 中的 <code>机场订阅</code> 替换为机场订阅地址</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312120915850.png" alt="1"></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">proxy-providers:</span></span><br><span class="line">  <span class="attr">Subscribe:</span> &#123;<span class="string">&lt;&lt;:</span> <span class="string">*p</span>, <span class="attr">path:</span> <span class="string">./all.yaml</span>, <span class="attr">url:</span> <span class="string">机场订阅</span>&#125;</span><br><span class="line">    <span class="comment"># Meta支持机场通用订阅</span></span><br></pre></td></tr></table></figure><h2 id="Clash-Verge-中导入-配置"><a href="#Clash-Verge-中导入-配置" class="headerlink" title="Clash Verge 中导入 配置"></a>Clash Verge 中导入 <strong>配置</strong></h2><ul><li>打开Clash Verge，点击 <strong>配置</strong>，点击右上角<strong>新建</strong></li><li>类型选择<strong>Local</strong>，点击下方 <strong>选择文件</strong>，选择修改好的文件</li><li>选择导入的配置，右键-启用</li><li>点击 <strong>代理</strong> ，设置分流</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312120915851.png" alt="5"></p><h2 id="策略组修改为手动选择节点"><a href="#策略组修改为手动选择节点" class="headerlink" title="策略组修改为手动选择节点"></a>策略组修改为手动选择节点</h2><blockquote><p>默认为自动选择延迟最低节点，<strong>按需</strong> 修改为手动选择</p></blockquote><ul><li>在自定义策略下的分流策略组中选择需要的地区节点，此处以 <strong>国外网站</strong> 举例，选择 <strong>香港节点</strong></li><li>下拉到下方的 <strong>香港节点</strong> 策略组，此时该策略组以 <code>url-test</code> 运行，即按最低延迟选择节点</li><li>如果要修改为手动选择节点，则需要编辑配置文件，在 <strong>配置</strong> ，右键需要修改的配置文件，点击 <strong>编辑</strong></li><li>找到<code> - &#123;name: 🇭🇰 香港节点, &lt;&lt;: *auto, filter: ....&quot;&#125;</code>，将 <code>*auto</code> 修改为 <code>*select</code></li><li>在 <strong>香港节点</strong> 策略组中选择需要的节点，则 <strong>国外网站</strong> 策略组走 <strong>香港节点</strong> 中选择的节点</li></ul><p>eg:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">...</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> &#123;<span class="attr">name:</span> <span class="string">🇭🇰</span> <span class="string">香港节点</span>, <span class="string">&lt;&lt;:</span> <span class="string">*auto</span>, <span class="attr">filter:</span> <span class="string">&quot;^(?=.*((?i)🇭🇰|香港|(\b(HK|Hong)\b)))(?!.*((?i)回国|校园|游戏|(\b(GAME)\b))).*$&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">👇</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> &#123;<span class="attr">name:</span> <span class="string">🇭🇰</span> <span class="string">香港节点</span>, <span class="string">&lt;&lt;:</span> <span class="string">*select</span>, <span class="attr">filter:</span> <span class="string">&quot;^(?=.*((?i)🇭🇰|香港|(\b(HK|Hong)\b)))(?!.*((?i)回国|校园|游戏|(\b(GAME)\b))).*$&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="string">...</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="订阅转换（懒人方法）"><a href="#订阅转换（懒人方法）" class="headerlink" title="订阅转换（懒人方法）"></a>订阅转换（懒人方法）</h1><h2 id="在线订阅转换"><a href="#在线订阅转换" class="headerlink" title="在线订阅转换"></a>在线订阅转换</h2><p>在线订阅转换可能出现订阅泄露</p><h2 id="打开ACL4SSR"><a href="#打开ACL4SSR" class="headerlink" title="打开ACL4SSR"></a>打开<a href="https://acl4ssr-sub.github.io/">ACL4SSR</a></h2><h2 id="填入-机场订阅-和-远程配置"><a href="#填入-机场订阅-和-远程配置" class="headerlink" title="填入 机场订阅 和 远程配置"></a>填入 <strong>机场订阅</strong> 和 <strong>远程配置</strong></h2><p><strong><em>自用 多流媒体分组 自动测速 配置</em></strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/Repcz/Tool/X/Clash/Meta/Online_Full_Auto.ini</span><br></pre></td></tr></table></figure><h2 id="选择后端地址并生成订阅"><a href="#选择后端地址并生成订阅" class="headerlink" title="选择后端地址并生成订阅"></a>选择后端地址并生成订阅</h2><ul><li>强烈建议使用自建后端，自建后端订阅转换可以有效防止订阅泄露以及规则下载不全等问题，具体方法见<a href="https://github.com/Repcz/Tool/tree/X/subconverter">自建subconverter订阅转换</a></li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312120915852.png" alt="4"></p><h2 id="本地后端订阅转换（推荐）"><a href="#本地后端订阅转换（推荐）" class="headerlink" title="本地后端订阅转换（推荐）"></a>本地后端订阅转换（推荐）</h2><p>详细使用方法见<a href="https://github.com/Repcz/Tool/tree/X/subconverter">自建subconverter订阅转换</a></p><h2 id="导入Clash-Verge"><a href="#导入Clash-Verge" class="headerlink" title="导入Clash Verge"></a>导入Clash Verge</h2><ul><li>打开Clash Verge，点击 <strong>配置</strong>，导入<strong>订阅转换</strong>后的链接</li><li>点击 <strong>代理</strong> ，设置分流</li></ul><h1 id="项目地址"><a href="#项目地址" class="headerlink" title="项目地址"></a>项目地址</h1><p><a href="https://github.com/Repcz/Tool">https://github.com/Repcz/Tool</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;下载Clash-Meta内核客户端&quot;&gt;&lt;a href=&quot;#下载Clash-Meta内核客户端&quot; class=&quot;headerlink&quot; title=&quot;下载Clash.Meta内核客户端&quot;&gt;&lt;/a&gt;下载Clash.Meta内核客户端&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;&lt;a h</summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="科学上网" scheme="http://blog.yuqi.fun/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
  </entry>
  
  <entry>
    <title>利用CF Workers搭建Github加速服务</title>
    <link href="http://blog.yuqi.fun/undefined/ee2e5bab.html"/>
    <id>http://blog.yuqi.fun/undefined/ee2e5bab.html</id>
    <published>2023-12-12T00:00:00.000Z</published>
    <updated>2023-12-12T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="利用CF-Workers搭建GH-Proxy服务"><a href="#利用CF-Workers搭建GH-Proxy服务" class="headerlink" title="利用CF Workers搭建GH-Proxy服务"></a>利用CF Workers搭建GH-Proxy服务</h1><blockquote><p>项目地址：<a href="https://github.com/hunshcn/gh-proxy">hunshcn&#x2F;gh-proxy: github release、archive以及项目文件的加速项目</a><br>项目简介：github release、archive以及项目文件的加速项目，支持clone，有Cloudflare Workers无服务器版本以及Python版本</p></blockquote><ol><li>注册一个CloudFlare账户</li><li>进入<a href="https://workers.cloudflare.com/">CF Workers</a>页面，点击 <strong>创建应用程序 <img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312120902203.png" alt="img"></strong></li><li>点击 <strong>创建Worker <img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312120902204.png" alt="img"></strong></li><li>按需填写 <strong>名称</strong>，点击右下角 <strong>部署</strong><br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312120902205.png" alt="img"></li><li>点击 <strong>编辑代码</strong><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312120902206.png" alt="img"></li><li>将代码<strong>复制并替换编辑框里的内容</strong>，点击右边的 <strong>保存并部署</strong>，返回刚才的管理页面</li></ol><blockquote><p>代码地址：<a href="https://cdn.jsdelivr.net/gh/hunshcn/gh-proxy@master/index.js">cdn.jsdelivr.net&#x2F;gh&#x2F;hunshcn&#x2F;gh-proxy@master&#x2F;index.js</a></p></blockquote><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312120902207.png" alt="img"></p><ol><li>点击<strong>查看链接</strong>，显示如下界面即为成功<img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312120902208.png" alt="img"></li></ol><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312120902209.png" alt="img"></p><blockquote><h2 id="Cloudflare-Workers计费"><a href="#Cloudflare-Workers计费" class="headerlink" title="Cloudflare Workers计费"></a>Cloudflare Workers计费</h2><p>到 <code>overview</code> 页面可参看使用情况。免费版每天有 10 万次免费请求，并且有每分钟1000次请求的限制。</p><p>如果不够用，可升级到 $5 的高级版本，每月可用 1000 万次请求（超出部分 $0.5&#x2F;百万次请求）。</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;利用CF-Workers搭建GH-Proxy服务&quot;&gt;&lt;a href=&quot;#利用CF-Workers搭建GH-Proxy服务&quot; class=&quot;headerlink&quot; title=&quot;利用CF Workers搭建GH-Proxy服务&quot;&gt;&lt;/a&gt;利用CF Workers搭建</summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="网站" scheme="http://blog.yuqi.fun/tags/%E7%BD%91%E7%AB%99/"/>
    
  </entry>
  
  <entry>
    <title>ABPLC通过Modbus TCP读取设备压力值</title>
    <link href="http://blog.yuqi.fun/undefined/3529204a.html"/>
    <id>http://blog.yuqi.fun/undefined/3529204a.html</id>
    <published>2023-12-11T00:00:00.000Z</published>
    <updated>2023-12-11T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ABPLC通过Modbus-TCP读取设备压力值"><a href="#ABPLC通过Modbus-TCP读取设备压力值" class="headerlink" title="ABPLC通过Modbus TCP读取设备压力值"></a>ABPLC通过Modbus TCP读取设备压力值</h1><p>使用罗克韦尔（AB）-PLC以客户端形式通过Modbus TCP于设备通讯，并读取压力值。</p><h1 id="Modbus-TCP客户端AOI程序导入"><a href="#Modbus-TCP客户端AOI程序导入" class="headerlink" title="Modbus TCP客户端AOI程序导入"></a>Modbus TCP客户端AOI程序导入</h1><p>在<a href="https://www.rockwellautomation.com.cn/">罗克韦尔官网</a>搜索<strong>Modbus TCP Add-On</strong> ，并下载例程，或者点击<a href="https://yunzhongzhuan.com.publicdn.com/download/2764037/VmhKbiki/ModbusTCPAOIver2.04.zip">链接</a>直接下载。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111124321.png"></p><p>在Studio 5000中新建一个梯级例程，选中梯级右键导入例程。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111128174.png" alt="image-20231208160530699"></p><p>选择<strong>raC_Opr_NetModbusTCPClient_Rung.L5X</strong>文件，并单击<strong>导入</strong>。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111128106.png" alt="image-20231208160926802"></p><p>导入对话框打开后选择<strong>Tag</strong>，根据需要修改<strong>Tag</strong>名字。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111128074.png" alt="image-20231208161312164"></p><p>单击<strong>确认</strong>按钮，完成导入。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111128521.png" alt="image-20231208161626725"></p><h1 id="配置本地运行参数"><a href="#配置本地运行参数" class="headerlink" title="配置本地运行参数"></a>配置本地运行参数</h1><p>Modbus TCP客户端要求EtherNet&#x2F;IP模块支持Logix套接字。详见<a href="https://rockwellautomation.custhelp.com/app/answers/detail/a_id/470690">链接</a></p><p>右键单击连接到<strong>Ref_Connection</strong>参数的Tag，然后选择监控。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111128582.png" alt="image-20231208162556767"></p><p>打开参数<strong>Tag</strong>，设置相应参数。</p><table><thead><tr><th align="left">Tag</th><th>参数</th></tr></thead><tbody><tr><td align="left">LocalSlot</td><td>本地EtherNet&#x2F;IP模块的插槽</td></tr><tr><td align="left">LocalAddress</td><td>EtherNet&#x2F;IP模块的.LocalAddress地址。仅对于双IP模式的CompactLogix 5380 和 5480，用于指定Modbus TCP通讯的本地以太网连接的IP地址。其他情况，此字段为空。</td></tr><tr><td align="left">DestAddress</td><td>指定Modbus服务端设备的以太网IP地址。该地址必须指定，不可为空。</td></tr><tr><td align="left">DestinationPort</td><td>指定ModbusTCP端口为502，该值为ModbusTCP协议标准值。</td></tr></tbody></table><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111128823.png" alt="image-20231208162756121"></p><p>将连接到<strong>Inp_Enable</strong>参数的Tag值设置为1，启动ModbusTCP客户端。</p><p>如果在运行中修改了参数，请务必重置<strong>Inp_Enable</strong>参数。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111129829.png" alt="image-20231208164403827"></p><h1 id="确认数据位置"><a href="#确认数据位置" class="headerlink" title="确认数据位置"></a>确认数据位置</h1><p>根据压力测量模块寄存器地址表格，确认压力值读取地址：40001&#x2F;40002。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111129828.png" alt="image-20231211091447848"></p><h1 id="配置数据交换"><a href="#配置数据交换" class="headerlink" title="配置数据交换"></a>配置数据交换</h1><p>监控<strong>Ref_Transactions</strong>参数连接的Tag。</p><ol><li><p>在<strong>PollInterval</strong>标签中配置轮询间隔时间（单位：毫秒）。</p><p>默认值为1000（1秒），最小值为80毫秒，如何轮询低于80毫秒的任务都将以1000毫秒的速率进行轮询。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111129617.png" alt="image-20231208165214734"></p></li><li><p>在<strong>TransType</strong>标签中设置Modbus功能代码。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111129658.png" alt="image-20231208165523479"></p><table><thead><tr><th>功能代码</th><th>名称</th><th>说明</th><th>Modbus地址范围</th></tr></thead><tbody><tr><td>01</td><td>读取线圈</td><td>用于读取线圈的状态，它可以读取一个或多个线圈的状态，返回结果为状态字节，每个字节可以表示8个线圈的状态。</td><td>本地地址：00001-01024；服务端地址：00001-065536</td></tr><tr><td>02</td><td>读取离散输入</td><td>用于读取离散输入的状态，它可以读取一个或多个离散输入的状态，返回结果为状态字节，每个字节可以表示8个离散输入的状态。</td><td>本地地址：10001-11024；服务端地址：10001-165536</td></tr><tr><td>03</td><td>读取保持寄存器</td><td>用于读取保持寄存器的值，它可以读取一个或多个保持寄存器的值，返回结果为寄存器值，每个寄存器可以表示一个16位二进制值。</td><td>本地地址：40001-41024；服务端地址：40001-465536</td></tr><tr><td>04</td><td>读取输入寄存器</td><td>用于读取输入寄存器的值，它可以读取一个或多个输入寄存器的值，返回结果为寄存器值，每个寄存器可以表示一个16位二进制值。</td><td>本地地址：30001-31024；服务端地址：30001-365536</td></tr><tr><td>05</td><td>写单个线圈</td><td>用于写入单个线圈的状态，它可以写入一个线圈的状态，返回结果为写入的状态字节，每个字节可以表示8个线圈的状态。</td><td>本地地址：00001-01024；服务端地址：00001-065536</td></tr><tr><td>06</td><td>写单个保持寄存器</td><td>用于写入单个寄存器的值，它可以写入一个寄存器的值，返回结果为写入的寄存器值，每个寄存器可以表示一个16位二进制值。</td><td>本地地址：40001-41024；服务端地址：40001-465536</td></tr><tr><td>15</td><td>写入多个线圈</td><td>用于写入多个线圈，它可以写入一个或多个线圈的状态。</td><td>本地地址：00001-01024；服务端地址：00001-065536</td></tr><tr><td>16</td><td>写入多个保持寄存器</td><td>用于写入多个保持寄存器，它可以写入一个或多个保持寄存器的状态。</td><td>本地地址：40001-41024；服务端地址：40001-465536</td></tr></tbody></table></li><li><p>在对等服务器设备中需要设置<strong>StationID</strong>标签，大多数情况下ModbusTCP服务器会忽略该字段。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111129534.png" alt="image-20231208171706660"></p></li><li><p>设置<strong>BeginAddress</strong>标签。该值表示要从TCP服务端读取或者写入的起始地址。</p><p>根据上面设置功能代码，该数值分别代表不同的Modbus地址。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111129088.png" alt="image-20231208172013912"></p></li><li><p>设置<strong>Count</strong>标签。该值表示要从ModbusTCP服务端读取或写入的项目数。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111129874.png" alt="image-20231211092051869"></p></li><li><p>设置<strong>LocalAddress</strong>标签。该值表示从ModbusTCP服务端读取或写入的数据放置到“<strong>Data</strong>”数组的起始地址。</p><p>前面配置的功能代码为读取保持寄存器，所以读取地址为4xxx。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111129730.png" alt="image-20231211092952178"></p><p>将读取数据从数组的第0为开始存放。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111129844.png" alt="image-20231211093045827"></p></li><li><p>将<strong>Enabled</strong>标签设置为1，启用第一组参数。</p></li></ol><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111129436.png" alt="image-20231208164957692"></p><h1 id="使用限制"><a href="#使用限制" class="headerlink" title="使用限制"></a>使用限制</h1><ol><li>必须使用Import Rung函数来实现，以保留Message指令配置。不要使用复制&#x2F;粘贴，因为它不会带来完整的消息指令配置和标签。一旦rung实现，不要使用Search&#x2F;Replace标签。所有的替换只能在梯级导入期间进行。</li><li>每个控制器支持多个客户机AOI实例。每个实例必须使用自己的一组backing和Message标记，但是“…_Data”标记结构可以在aoi之间共享。</li><li>Modbus TCP Server和Modbus TCP Client aoi可以驻留在同一个程序中。但是，服务器应用程序可能会由于共享的Logix Sockets对象而导致客户端暂时断开连接。</li><li>当在ControlLogix Redundancy系统中实现时，用户应该期望在Modbus TCP Client AOI导致控制器切换后至少有5秒的Modbus通信丢失。由于正在使用的服务器设备的行为，可能会有额外的Modbus通信延迟。</li></ol><h1 id="监控Modbus-TCP客户端"><a href="#监控Modbus-TCP客户端" class="headerlink" title="监控Modbus TCP客户端"></a>监控Modbus TCP客户端</h1><ol><li><p><strong>ModbusTCP</strong>数据标签位于<strong>Ref_ModbusData</strong>参数标签下。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111129703.png" alt="image-20231211100839818"></p><p>该标签包含线圈(0xxxx)，离散输入(1xxxx)，输入寄存器(3xxxx)和保持寄存器(4xxxx)四个独立的数据区域。<br>用户应用程序可以不受任何限制地读取和填充这些标记值。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111130298.png" alt="image-20231211101008143"></p></li><li><p>Modbus TCP AOI 状态位</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111130002.png" alt="image-20231211101427161"></p><p>a. Sts_EN输出表示Modbus TCP Client功能已启用。</p><p>b. “Sts_Connected”输出表示客户端连接请求被服务器接受。它不指示活动数据流。<br>应该检查单个事务的状态以验证数据交换。</p><p>c. Sts_Faulted输出表示消息指令有一条出错。</p><p>d. Sts_Overlap输出表示一个或多个事务在下一次触发之前没有完成</p><p>e. Sts_Overload输出表示在一个或多个事务中存在过多的重叠。</p></li><li><p>单个任务状态信息。这些TAg存在于5个内建任务中的每个任务中。<br>任务0 - 4)。</p><p>当请求的任务完成时，<strong>TransComplete</strong>位被置位。当它被要求进行下一次任务时，被程序清除。</p><p><strong>TransStatus</strong>值表示任务的当前状态。0&#x3D;成功，1&#x3D;正在处理中，2&#x3D;重试，-1&#x3D;异常。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111130362.png" alt="image-20231211102538268"></p></li><li><p>任务诊断Tag表示任务在处于活动状态时提供的内部动态信息。<strong>请勿修改这些Tag</strong></p></li></ol><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312111130326.png" alt="image-20231211102759109"></p><h1 id="中文参考文档下载"><a href="#中文参考文档下载" class="headerlink" title="中文参考文档下载"></a>中文参考文档下载</h1><p><a href="https://yunzhongzhuan.com.publicdn.com/download/2764038/aIx6vZpt/ModbusTCPClient-AOIbasedcodeforControlLogixv2.04.00zh.pdf">Modbus TCP 客户端AOI中文文档</a></p><p><a href="https://yunzhongzhuan.com.publicdn.com/download/2764040/QDbjnDZ5/Modbus+TCP+Server+-+AOI+based+code+for+ControlLogix+v+2.04.00+zh.pdf">Modbus TCP服务端AOI中文文档</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ABPLC通过Modbus-TCP读取设备压力值&quot;&gt;&lt;a href=&quot;#ABPLC通过Modbus-TCP读取设备压力值&quot; class=&quot;headerlink&quot; title=&quot;ABPLC通过Modbus TCP读取设备压力值&quot;&gt;&lt;/a&gt;ABPLC通过Modbus </summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="PLC" scheme="http://blog.yuqi.fun/tags/PLC/"/>
    
  </entry>
  
  <entry>
    <title>R探长 甲骨文云开机脚本</title>
    <link href="http://blog.yuqi.fun/undefined/d604b8c7.html"/>
    <id>http://blog.yuqi.fun/undefined/d604b8c7.html</id>
    <published>2023-12-08T00:00:00.000Z</published>
    <updated>2023-12-08T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="原作者地址"><a href="#原作者地址" class="headerlink" title="原作者地址"></a>原作者地址</h1><p><a href="https://github.com/semicons/java_oci_manage/blob/main/md/install.md">https://github.com/semicons/java_oci_manage/blob/main/md/install.md</a></p><h1 id="debian12先要装依赖"><a href="#debian12先要装依赖" class="headerlink" title="debian12先要装依赖"></a>debian12先要装依赖</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/apt/sources.list</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deb http://deb.debian.org/debian bullseye main</span><br><span class="line"></span><br><span class="line">deb-src http://deb.debian.org/debian bullseye main</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line"></span><br><span class="line">apt install openjdk-17-jdk</span><br></pre></td></tr></table></figure><h1 id="更新环境"><a href="#更新环境" class="headerlink" title="更新环境"></a>更新环境</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update -y &amp;&amp; apt install -y curl wget sudo</span><br></pre></td></tr></table></figure><h1 id="安装R探长"><a href="#安装R探长" class="headerlink" title="安装R探长"></a>安装R探长</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /home &amp;&amp; mkdir rbot &amp;&amp; cd rbot</span><br><span class="line"></span><br><span class="line">wget -O gz_client_bot.tar.gz https://github.com/semicons/java_oci_manage/releases/latest/download/gz_client_bot.tar.gz &amp;&amp; tar -zxvf gz_client_bot.tar.gz --exclude=client_config &amp;&amp; tar -zxvf gz_client_bot.tar.gz --skip-old-files client_config &amp;&amp; chmod +x sh_client_bot.sh</span><br></pre></td></tr></table></figure><h1 id="下载配置client-config模板"><a href="#下载配置client-config模板" class="headerlink" title="下载配置client_config模板"></a>下载配置client_config模板</h1><p><a href="https://github.com/kejilion/sh/blob/main/client_config">https://github.com/kejilion/sh/blob/main/client_config</a></p><h1 id="到甲骨文云下载API证书并获取API信息"><a href="#到甲骨文云下载API证书并获取API信息" class="headerlink" title="到甲骨文云下载API证书并获取API信息"></a>到甲骨文云下载API证书并获取API信息</h1><p><a href="https://cloud.oracle.com/">https://cloud.oracle.com/</a></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312080925335.png"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312080925572.png"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312080925945.png"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312080925124.png"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312080925243.png"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312080925743.png"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312080926332.png"></p><h1 id="key存放路径"><a href="#key存放路径" class="headerlink" title="key存放路径"></a>key存放路径</h1><p>key_file&#x3D;&#x2F;home&#x2F;rbot&#x2F;key.pem</p><h1 id="关注R探长频道和机器人"><a href="#关注R探长频道和机器人" class="headerlink" title="关注R探长频道和机器人"></a>关注R探长频道和机器人</h1><p>R探长频道：<a href="https://t.me/agentONE_R">https://t.me/agentONE_R</a></p><p>R探长机器人：<a href="https://t.me/radiance_helper_bot">https://t.me/radiance_helper_bot</a></p><h1 id="和机器人对话获取随机用户名和密码"><a href="#和机器人对话获取随机用户名和密码" class="headerlink" title="和机器人对话获取随机用户名和密码"></a>和机器人对话获取随机用户名和密码</h1><p>&#x2F;raninfo</p><h1 id="填写示例"><a href="#填写示例" class="headerlink" title="填写示例"></a>填写示例</h1><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312080926509.png"></p><p>填写完成后</p><p>把<strong>client_config.txtclient_config.txt</strong>改为<strong>client_config</strong></p><p>把下载的pem文件改为<strong>key.pem</strong></p><p>然后上传到**&#x2F;home&#x2F;rbot&#x2F;**目录</p><h1 id="启动或重启"><a href="#启动或重启" class="headerlink" title="启动或重启"></a>启动或重启</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash sh_client_bot.sh </span><br></pre></td></tr></table></figure><h1 id="查看日志-ctrl-c退出日志"><a href="#查看日志-ctrl-c退出日志" class="headerlink" title="查看日志(ctrl + c退出日志)"></a>查看日志(ctrl + c退出日志)</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -f log_r_client.log </span><br></pre></td></tr></table></figure><h1 id="终止程序"><a href="#终止程序" class="headerlink" title="终止程序"></a>终止程序</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep r_client.jar | grep -v grep | awk &#x27;&#123;print $2&#125;&#x27; | xargs kill -9 </span><br></pre></td></tr></table></figure><h1 id="卸载程序"><a href="#卸载程序" class="headerlink" title="卸载程序"></a>卸载程序</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf gz_client_bot.tar.gz client_config r_client.jar sh_client_bot.sh log_r_client.log debug-.log </span><br></pre></td></tr></table></figure><p>如也不需要JDK也可卸载：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get remove openjdk*</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;原作者地址&quot;&gt;&lt;a href=&quot;#原作者地址&quot; class=&quot;headerlink&quot; title=&quot;原作者地址&quot;&gt;&lt;/a&gt;原作者地址&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/semicons/java_oci_manage/blob/</summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="服务器" scheme="http://blog.yuqi.fun/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>PVE安装iStoreOS</title>
    <link href="http://blog.yuqi.fun/undefined/d167335e.html"/>
    <id>http://blog.yuqi.fun/undefined/d167335e.html</id>
    <published>2023-12-03T00:00:00.000Z</published>
    <updated>2023-12-03T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="首先X86机器已经安装好PVE机器，且能正常联网；"><a href="#首先X86机器已经安装好PVE机器，且能正常联网；" class="headerlink" title="首先X86机器已经安装好PVE机器，且能正常联网；"></a>首先X86机器已经安装好PVE机器，且能正常联网；</h1><ul><li>这里不提供X86机器安装pve教程，自行科普。</li></ul><h1 id="下载固件"><a href="#下载固件" class="headerlink" title="下载固件"></a>下载固件</h1><ul><li><a href="https://fw.koolcenter.com/iStoreOS/x86_64/">固件下载(opens new window)</a></li><li><a href="https://fw.koolcenter.com/iStoreOS/x86_64_efi/">固件下载-EFI(opens new window)</a></li></ul><p>越后面的版本越新，下载最新的版本。下载完成之后不需要解压。</p><h1 id="在PVE里新建虚拟机；"><a href="#在PVE里新建虚拟机；" class="headerlink" title="在PVE里新建虚拟机；"></a>在PVE里新建虚拟机；</h1><ul><li>进入PVE系统管理界面，右上角“新建虚拟机”；</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031646065.jpeg"></p><ul><li>只填写名称，VM ID即为虚拟机ID，自动排序的，也可自定义，其余不管，下一步：</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031646686.jpeg"></p><ul><li>勾选“不使用任何介质”，其余不管，下一步；</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031646138.jpeg"></p><ul><li>如果是下载的EFI固件，BIOS选择“OVMF(UEFI)”，EFI存储选择PVE的虚拟盘，其余不管，下一步：</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031646135.jpeg"></p><p>如果下载的非EFI固件，此页面不用管，直接下一步；</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031646944.jpeg"></p><ul><li>磁盘，不需要创建，直接删掉，下一步；</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031646104.jpeg"></p><ul><li>CPU核心，根据你的实机CPU核设置(比如实机是6核12线程，大于等于1且小于等于12都成)，类别建议选host；</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031646942.jpeg"></p><ul><li>内存根据实际需求设置；</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031646040.jpg" alt="download"></p><ul><li>网络默认即可，默认已经选了PVE的虚拟LAN；</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031646342.jpeg"></p><ul><li>完成，等待虚拟机创建好。</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031647835.jpeg"></p><h1 id="往刚创建的虚拟机里写入固件；"><a href="#往刚创建的虚拟机里写入固件；" class="headerlink" title="往刚创建的虚拟机里写入固件；"></a>往刚创建的虚拟机里写入固件；</h1><ul><li>利用WinSCP等工具，把下载好的固件(教程用的EFI固件)和img2kvm工具放入root目录下；</li><li><a href="https://fw.koolcenter.com/binary/other-tools/">img2kvm工具下载(opens new window)</a></li><li>终端登录PVE系统后台，终端输入命令：<code>chmod 777 ./img2kvm</code></li><li>继续终端输入：<code>./img2kvm 固件完整名 虚拟机ID</code></li></ul><p>比如教程所示的虚拟机ID是104，下载的固件完整名：istoreos-21.02.3-2022092019-x86-64-squashfs-combined-efi.img.gz</p><p>所以输入的命令就是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./img2kvm istoreos-21.02.3-2022092019-x86-64-squashfs-combined-efi.img.gz 104</span><br></pre></td></tr></table></figure><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031647302.jpeg"></p><p>然后看PVE虚拟机104的硬件界面，会出现一个未添加的硬盘，双击添加：</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031647806.jpeg"></p><p>不用设置直接添加：</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031647609.jpeg"></p><p>添加完成，会出现一个硬盘：</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031647016.jpeg"></p><p>选项——引导顺序，双击进入编辑：</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031647797.jpeg"></p><p>把刚添加的硬盘作为第一启动：</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031647908.jpeg"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031647362.jpeg"></p><ul><li>把EFI磁盘删掉，若BIOS不是UEFI，无此项设置；</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031647310.jpeg"></p><h1 id="启动iStoreOS："><a href="#启动iStoreOS：" class="headerlink" title="启动iStoreOS："></a>启动iStoreOS：</h1><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031648006.jpeg"></p><ul><li>如果前面的步骤没出错，是能正常启动的：</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031648517.jpeg"></p><ul><li>等系统启动一两分钟，然后点击此虚拟机——控制台(右上角控制台也可)：</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031648522.jpeg"></p><p>鼠标点在此界面，键盘回车：就会出现终端入口：</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031648241.jpeg"></p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031648418.jpeg"></p><p>输入：<code>quickstart</code>，利用键盘“上下键”选择2，回车：</p><p>输入要分配给iStoreOS的LAN口的ip(必须是PVE虚拟LAN的IP段，比如PVE的管理IP是192.168.2.88，那么此处的IP就必须是192.168.2.XXX)，回车生效；</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031648082.jpeg"></p><p>要求输入掩码(mask)，照着填：255.255.255.0，回车生效：</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031648554.jpeg"></p><p>然后选择QUIT退出此界面：</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031648466.jpeg"></p><ul><li>输入：<code>reboot</code>重启iStoreOS，这样浏览器输入我们设置的IP，就进入iStoreOS界面了。</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031648602.jpeg"></p><p>iStoreOS默认登录密码是：password</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031648519.jpeg"></p><h1 id="配置iStoreOS："><a href="#配置iStoreOS：" class="headerlink" title="配置iStoreOS："></a>配置iStoreOS：</h1><p>此刻我们进入iStoreOS，但是目前iStoreOS是个单臂路由状态，只有一个LAN口。</p><ul><li>如果PVE里已有主路由系统，需要把iStoreOS配置为旁路由，在“网络向导”里配置“旁路由”即可。</li></ul><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031649861.jpeg"></p><ul><li>如果需要将iStoreOS作为主路由系统，就需要添加网口：</li></ul><p>首先在PVE里关闭iStoreOS虚拟机，然后硬件——添加一个PVE的网口作为WAN口；</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031649410.jpeg"></p><ul><li>然后再确认2个IP，首先确认：PVE的虚拟LAN管理IP，比如是192.168.2.88，那么就必须把iStoreOS的IP改成192.168.2.1~192.168.2.77之间，比如把PVE的IP放在iStoreOS主路由LAN口IP之后，不然PVE无法联网。</li><li>然后启动iStoreOS虚拟机，进入iStoreOS后，在“网络向导”里配置联网即可。</li></ul><h1 id="安装离线插件："><a href="#安装离线插件：" class="headerlink" title="安装离线插件："></a>安装离线插件：</h1><p><strong>注意，上述软件包安装，部分依赖依然要通过opkg软件源在线安装。如果安装失败，检查路由器自身的网络情况，特别是旁路由模式下最容易出现网络问题。</strong><br><strong>再三注意需要路由器自身联网正常</strong></p><ul><li><p>下载地址</p><p><a href="https://github.com/bcseputetto/Are-u-ok">https://github.com/bcseputetto/Are-u-ok</a></p></li><li><p>如何安装<br>下载后，来到iStore应用商店页面，点击手动安装，点击选择上传或者直接拖放文件<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202312031649689.png"></p></li></ul><p>对于没有iStore应用商店的OpenWrt也可以使用以下方法。<br>将 .run 文件上传到路由器上，然后在终端环境执行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh 包名.run</span><br></pre></td></tr></table></figure><p>例</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh PassWall4.71-2_x86_all_sdk_22.03.5.run</span><br></pre></td></tr></table></figure><p>如果文件不在当前路径记得填写路径，下例</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh /tmp/upload/PassWall4.71-2_x86_all_sdk_22.03.5.run</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;首先X86机器已经安装好PVE机器，且能正常联网；&quot;&gt;&lt;a href=&quot;#首先X86机器已经安装好PVE机器，且能正常联网；&quot; class=&quot;headerlink&quot; title=&quot;首先X86机器已经安装好PVE机器，且能正常联网；&quot;&gt;&lt;/a&gt;首先X86机器已经安装</summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="路由器" scheme="http://blog.yuqi.fun/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>Butterfly主题添加本地搜索功能</title>
    <link href="http://blog.yuqi.fun/undefined/f2a576c2.html"/>
    <id>http://blog.yuqi.fun/undefined/f2a576c2.html</id>
    <published>2023-11-30T00:00:00.000Z</published>
    <updated>2023-11-30T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>安装插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p>修改_config.yml文件，添加以下内容</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加本地搜索</span></span><br><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br></pre></td></tr></table></figure><p>修改_config.butterfly.yml文件，添加以下内容</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Preload the search data when the page loads.</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="literal">false</span></span><br><span class="line">  <span class="comment"># Show top n results per article, show all results by setting to -1</span></span><br><span class="line">  <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">  <span class="comment"># Unescape html strings to the readable one.</span></span><br><span class="line">  <span class="attr">unescape:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">CDN:</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;安装插件：&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;p</summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Butterfly" scheme="http://blog.yuqi.fun/tags/Butterfly/"/>
    
    <category term="hexo" scheme="http://blog.yuqi.fun/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>安卓14 + HttpCanary 抓包设置</title>
    <link href="http://blog.yuqi.fun/undefined/5fb4c97d.html"/>
    <id>http://blog.yuqi.fun/undefined/5fb4c97d.html</id>
    <published>2023-11-13T00:00:00.000Z</published>
    <updated>2023-11-13T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>这两天使用 HttpCanary 抓包，无法安装证书，如下图，搜索找到了解决办法。本教程适合安卓14 + 无法安装证书，以及解决“系统证书”和“目标App使用固定证书”的问题。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311130929372.jpg"></p><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><ol><li><p>手机需要root，安装好 Magisk 和 Xposed 框架（比如 LSPosed）；</p></li><li><p>下载安装 <a href="http://www.coolapk.com/apk/bin.mt.plus">【MT管理器】</a> （或其他类似文件管理器），并授予 root 权限。点这里 <a href="https://www.123pan.com/s/bAORVv-Epkl.html">查看链接</a> 下载里面3个文件，安装 HttpCanary_3.3.5.apk，其他两个待用。</p></li></ol><p>说明：HttpCanary_3.3.5.apk：HttpCanary 安装包，原版无修改；HttpCanary根证书.zip：Magisk 模块，将HttpCanary根证书添加至系统CA目录，证书文件需自己添加；TrustMeAlready_1.11.apk：Xposed模块，解决“目标app使用固定证书，无法抓包”。</p><h1 id="安装证书"><a href="#安装证书" class="headerlink" title="安装证书"></a>安装证书</h1><p>1.安装 HttpCanary 后，打开软件，若“安装根证书”无法安装点“跳过”即可，进入软件后，即可退出软件；<br>2.MT管理器打开 &#x2F;data&#x2F;user&#x2F;0&#x2F;com.guoshi.httpcanary&#x2F;cache，新建名为 HttpCanary.jks 的空文件；然后把 HttpCanary.p12 和 HttpCanary.pem 两个文件复制到其他文件夹里（比如 Download 文件夹），后面要用到，如下图。</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311130932355.gif"></p><p>3.打开 设置→安全→加密与凭据→安装证书，不同机型可能不同，也可以在设置搜索”安装证书”打开。这里需要安装三个证书（本人测试安装“CA 证书”即可，推荐全部安装）：</p><ol><li>点击 <strong>CA 证书</strong>，它会提示<strong>您的数据将不再是私密的</strong>，点<strong>仍然安装</strong>。找到刚才放证书的文件夹，选择 HttpCanary.pem 。 显示<strong>已安装CA证书</strong>。</li><li>点击 <strong>xxx和应用用户证书</strong>，选择 HttpCanary.p12 ，密码为 HttpCanary（推荐复制，避免输错），证书名称为 <strong>xxx and Apps</strong>（xxx看图）。</li><li>点击<strong>WLAN证书</strong>，选择 HttpCanary.p12 ，密码为 HttpCanary，证书名称为 WiFi。</li></ol><p>至此，用户证书安装完毕，点开用户凭据会看到有三个证书，如下图。<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311130934065.jpg"></p><h1 id="添加根证书至系统"><a href="#添加根证书至系统" class="headerlink" title="添加根证书至系统"></a>添加根证书至系统</h1><p>由于从Android 7.0版本开始，系统不再信任安装的用户证书，可能会导致无法抓取SSL&#x2F;TLS加密数据包或者无网络等问题，如下图。因此需要将HttpCanary根证书添加至系统CA目录，此操作需要在Root设备上进行。<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311130935681.jpg"><br>1.直接移动根证书<br>打开 HttpCanary→设置→HttpCanary根证书→添加根证书至系统（Root）→移动。若成功，则可以跳过此部分；若显示下图，则说明 system 分区没有解锁，可以通过 Magisk 模块移动根证书，接着看下面内容。<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311130935077.jpg"><br>2.通过 Magisk 模块移动根证书<br>(1) MT管理器打开 &#x2F;data&#x2F;misc&#x2F;user&#x2F;0&#x2F;cacerts-added&#x2F; ，安装完用户证书后，这个路径下面会生成一个 .0格式证书文件。在MT管理器另一侧窗口打开之前下载好的 HttpCanary根证书.zip ，打开到 HttpCanary根证书.zip&#x2F;system&#x2F;etc&#x2F;security&#x2F;cacerts&#x2F; 路径。<br>然后长按 .0格式文件，添加到 HttpCanary根证书.zip&#x2F;system&#x2F;etc&#x2F;security&#x2F;cacerts&#x2F; 里，如下图。<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311130936670.gif"><br>(2) 打开 Magisk→模块→从本地安装→选择“HttpCanary根证书.zip”→确定安装，安装完成后重启手机。<br>如下图，若打开 &#x2F;system&#x2F;etc&#x2F;security&#x2F;cacerts&#x2F; 路径，可以找到和 &#x2F;data&#x2F;misc&#x2F;user&#x2F;0&#x2F;cacerts-added&#x2F; 路径下相同的 .0文件，说明已成功把 HttpCanary根证书添加至系统CA目录。<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311130936693.jpg"></p><h1 id="解决“目标App使用固定证书”问题"><a href="#解决“目标App使用固定证书”问题" class="headerlink" title="解决“目标App使用固定证书”问题"></a>解决“目标App使用固定证书”问题</h1><p>如下图，在将HttpCanary根证书添加至系统CA目录后，对部分APP抓包仍会报错：目标App使用固定证书。<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311130937716.jpg"><br>解决办法是：安装前面下载好的“TrustMeAlready_1.11.apk”，安装完成在 LSPosed 中启用模块，勾选系统框架和需要抓包的APP，如下图。重启手机，一定要重启手机，否则不会生效。<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311130937034.jpg"><br>在完成上面设置后就可以愉快地抓包了。</p><h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a href="https://www.coolapk.com/feed/45789599?shareKey=Yjc1OGRiZDAwOWYwNjU1MTc5ZTk~&shareUid=922742&shareFrom=com.coolapk.market_13.3.6">https://www.coolapk.com/feed/45789599?shareKey=Yjc1OGRiZDAwOWYwNjU1MTc5ZTk~&amp;shareUid=922742&amp;shareFrom=com.coolapk.market_13.3.6</a></p><p><a href="https://www.coolapk.com/feed/43608693">https://www.coolapk.com/feed/43608693</a></p><h1 id="非系统SLL库抓包"><a href="#非系统SLL库抓包" class="headerlink" title="非系统SLL库抓包"></a>非系统SLL库抓包</h1><p>某些应用用的是非系统SLL库，比如某音，此教程无效。可以参考下面教程：<br><a href="https://bbs.kanxue.com/thread-271968.htm">https://bbs.kanxue.com/thread-271968.htm</a> </p><p><a href="https://bbs.kanxue.com/thread-276015.htm">https://bbs.kanxue.com/thread-276015.htm</a> </p><h1 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h1><p>HttpCanary 太久没有更新了，问题很多。大家可以关注一下同作者的新作 Reqable，未来会出安卓版，官网 <a href="https://reqable.com/zh-CN/">https://reqable.com/zh-CN/</a> 。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;这两天使用 HttpCanary 抓包，无法安装证书，如下图，搜索找到了解决办法。本教程适合安卓14 + 无法安装证书，以及解决“系统证书”</summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="手机" scheme="http://blog.yuqi.fun/tags/%E6%89%8B%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>x-ui最稳妥的魔术面板</title>
    <link href="http://blog.yuqi.fun/undefined/af28068c.html"/>
    <id>http://blog.yuqi.fun/undefined/af28068c.html</id>
    <published>2023-11-06T00:00:00.000Z</published>
    <updated>2023-11-06T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>最近经常有人被封端口，我自己搭的这个方案没被封过，现在分享出来。</strong></p><h2 id="系统：Debian10-11"><a href="#系统：Debian10-11" class="headerlink" title="系统：Debian10-11"></a>系统：Debian10-11</h2><p>首先要确保自己的vps是纯净的系统，不要商家预装的，在系统启动后操作DD重装脚本进行安装纯净版系统</p><h2 id="第一步：DD重装Debian10系统："><a href="#第一步：DD重装Debian10系统：" class="headerlink" title="第一步：DD重装Debian10系统："></a>第一步：DD重装Debian10系统：</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate https://raw.githubusercontent.com/qingee/dd/master/InstallNET.sh &amp;&amp; chmod +x InstallNET.sh &amp;&amp; ./InstallNET.sh -d 10 -v 64 -p &quot;notetoday&quot; -port &quot;22&quot;</span><br></pre></td></tr></table></figure><p>系统root密码：<code>notetoday</code><br>更改root密码：<code>passwd</code> 或者 <code>passwd root</code>输入你想要设置的密码即可，在ssh命令窗口输入密码<code>不显示是正常的</code></p><h2 id="第二步：安装WARP接管VPS的出站ip（加入香港节点WireGuard异常：可以去Github）"><a href="#第二步：安装WARP接管VPS的出站ip（加入香港节点WireGuard异常：可以去Github）" class="headerlink" title="第二步：安装WARP接管VPS的出站ip（加入香港节点WireGuard异常：可以去Github）"></a>第二步：安装WARP接管VPS的出站ip（加入香港节点WireGuard异常：可以去<a href="https://github.com/fscarmen/warp">Github</a>）</h2><blockquote><p>apt update<br>apt install curl -y<br>apt install gnupg2 -y<br>apt install wget -y<br># 自动配置 WARP WireGuard IPv4 网络<br>bash &lt;(curl -fsSL git.io&#x2F;warp.sh) 4<br>echo “1” &gt; &#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv6&#x2F;conf&#x2F;all&#x2F;disable_ipv6</p></blockquote><p>这个配置后你vps向外请求的所有ip都不是本机的真实ip，速度可能会有所影响，但是会很安全</p><h2 id="第三步：-安装适用于流媒体的XanMod内核开启BBR2（FQ-PIE）："><a href="#第三步：-安装适用于流媒体的XanMod内核开启BBR2（FQ-PIE）：" class="headerlink" title="第三步： 安装适用于流媒体的XanMod内核开启BBR2（FQ+PIE）："></a>第三步： 安装适用于流媒体的XanMod内核开启BBR2（FQ+PIE）：</h2><blockquote><ol><li>Register the PGP key:</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -qO - https://dl.xanmod.org/archive.key | sudo gpg --dearmor -o /usr/share/keyrings/xanmod-archive-keyring.gpg</span><br></pre></td></tr></table></figure><ol start="2"><li>Add the repository:</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;deb [signed-by=/usr/share/keyrings/xanmod-archive-keyring.gpg] http://deb.xanmod.org releases main&#x27; | sudo tee /etc/apt/sources.list.d/xanmod-release.list</span><br></pre></td></tr></table></figure><ol start="3"><li>Then update and install:  <strong>⇲</strong> Check platform compatibility in <strong>x86-64 psABI level reference</strong> below.</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt install linux-xanmod-x64v3</span><br></pre></td></tr></table></figure><ol start="4"><li>Reboot</li></ol></blockquote><p>执行完命令代码后等待系统重启，重启完成后执行以下脚本开启<code>BBR2</code></p><blockquote><p>bash &lt;(curl -Lso- <a href="https://git.io/kernel.sh">https://git.io/kernel.sh</a>)</p></blockquote><p><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061449957.png" alt="2022-10-22T05:09:28.png"></a><br><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061450569.png" alt="2022-10-22T05:13:42.png"></a><br><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061450421.png" alt="2022-10-22T05:15:10.png"></a><br>再次运行上面的代码，查看参数是否和下图一样，如果是一样的就是开启成功了<br><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061450627.png" alt="2022-10-22T05:17:17.png"></a> </p><h2 id="第四步：安装x-ui面板"><a href="#第四步：安装x-ui面板" class="headerlink" title="第四步：安装x-ui面板"></a><strong>第四步：安装x-ui面板</strong></h2><blockquote></blockquote><h2 id="PS：安装VPS开源MW控制面板（要装就装，不装也没事）"><a href="#PS：安装VPS开源MW控制面板（要装就装，不装也没事）" class="headerlink" title="PS：安装VPS开源MW控制面板（要装就装，不装也没事）"></a><strong>PS：安装VPS开源MW控制面板（要装就装，不装也没事）</strong></h2><p>使用这套配置操作，所有IP 都是CDNip</p><p><a href="https://www.notetoday.net/note/111.html">Linux主机开源面板：mdserver-web，完全免费，界面仿宝塔面板</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://gcore.jsdelivr.net/gh/midoks/mdserver-web@latest/scripts/install.sh | bash</span><br><span class="line">curl -fsSL  https://raw.githubusercontent.com/midoks/mdserver-web/dev/scripts/update_dev.sh | bash</span><br></pre></td></tr></table></figure><p><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061450166.png" alt="2022-10-22T05:25:00.png"></a><br>记住控制面板的信息登录上去后在安全里<code>关闭防火墙</code></p><p>或者海外宝塔：<a href="https://www.aapanel.com/new/download.html">https://www.aapanel.com/new/download.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;最近经常有人被封端口，我自己搭的这个方案没被封过，现在分享出来。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;系统：Debian10-11&quot;&gt;&lt;a href=&quot;#系统：Debian10-11&quot; class=&quot;headerlink&quot; title=&quot;系统：Debi</summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="VPN" scheme="http://blog.yuqi.fun/tags/VPN/"/>
    
  </entry>
  
  <entry>
    <title>一键DD纯净系统脚本 CentOS/Debian/Ubuntu</title>
    <link href="http://blog.yuqi.fun/undefined/7db8067.html"/>
    <id>http://blog.yuqi.fun/undefined/7db8067.html</id>
    <published>2023-11-06T00:00:00.000Z</published>
    <updated>2023-11-06T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>基本所有的VPS服务器商家，都会提供免费的Linux系统供安装，比如CentOS、Debian、Ubuntu等。那为什么还要使用一键DD脚本重装&#x2F;更换系统呢？</p><ol><li>商家提供的系统版本有限，可能没有自己需要的版本。</li><li>商家的系统安装有自己不想要的服务，有的预装系统本身也有缺陷，导致很多服务安装不上</li><li>商家的系统无法安装特定软件，比如很挑内核的锐速。</li></ol><p>以上几种情况，一键DD脚本就可以为服务器更换一个纯净的系统，帮你解决问题。</p><h2 id="所需环境"><a href="#所需环境" class="headerlink" title="所需环境"></a>所需环境</h2><hr><p>以网络流传较广的Vicer一键DD为例，其所需环境为：</p><p>**架构：**KVM&#x2F;XEN，不支持OpenVZ。<br>**系统：**Debian&#x2F;Ubuntu&#x2F;CentOS</p><h2 id="一键DD脚本使用教程"><a href="#一键DD脚本使用教程" class="headerlink" title="一键DD脚本使用教程"></a>一键DD脚本使用教程</h2><p>注意事项：</p><ul><li><strong>Vicer脚本目前不支持重装为CentOS 7系统，支持CentOS 6.9以下版本。</strong></li><li><strong>重装的系统源自官方发行版。</strong></li><li><strong>安装过程全自动进行，无需VNC操作，无需进入救援模式。</strong></li><li><strong>系统安装完成后的默认用户名为root，默认密码为: <code>MoeClub.org</code></strong></li></ul><p><strong>DD脚本示例：</strong><br>由于脚本命令中需要写明目标系统版本，所以根据需求不同，最终的运行命令也各不相同。</p><p>下面提供几个使用范例，可以直接复制使用，也可以将命令中的系统版本替换为其它版本。</p><h2 id="重装为CentOS："><a href="#重装为CentOS：" class="headerlink" title="重装为CentOS："></a>重装为CentOS：</h2><p>以下命令中的 -c 后面为CentOS版本号，-v 后面为64位&#x2F;32位，可根据需求进行替换。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">CentOS 6.10 64位：</span></span><br><span class="line">bash &lt;(wget --no-check-certificate -qO- &#x27;https://raw.githubusercontent.com/notetoday/sh/main/InstallNET.sh&#x27;) -c 6.10 -v 64 -a</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">CentOS 6.10 32位：</span></span><br><span class="line">bash &lt;(wget --no-check-certificate -qO- &#x27;https://raw.githubusercontent.com/notetoday/sh/main/InstallNET.sh&#x27;) -c 6.10 -v 32 -a</span><br></pre></td></tr></table></figure><h2 id="重装为Debian："><a href="#重装为Debian：" class="headerlink" title="重装为Debian："></a>重装为Debian：</h2><p>以下命令中的 -d 后面为Debian版本号，-v 后面为64位&#x2F;32位，可根据需求进行替换。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Debian 8 64位：</span></span><br><span class="line">bash &lt;(wget --no-check-certificate -qO- &#x27;https://raw.githubusercontent.com/notetoday/sh/main/InstallNET.sh&#x27;) -d 8 -v 64 -a</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Debian 9 64位：</span></span><br><span class="line">bash &lt;(wget --no-check-certificate -qO- &#x27;https://raw.githubusercontent.com/notetoday/sh/main/InstallNET.sh&#x27;) -d 9 -v 64 -a</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Debian 10 64位：</span></span><br><span class="line">bash &lt;(wget --no-check-certificate -qO- &#x27;https://raw.githubusercontent.com/notetoday/sh/main/InstallNET.sh&#x27;) -d 10 -v 64 -a</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Debian 11 64位：</span></span><br><span class="line">bash &lt;(wget --no-check-certificate -qO- &#x27;https://raw.githubusercontent.com/notetoday/sh/main/InstallNET.sh&#x27;) -d 11 -v 64 -a</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Debian 11.5 64位：</span></span><br><span class="line">bash &lt;(wget --no-check-certificate -qO- &#x27;https://raw.githubusercontent.com/notetoday/sh/main/InstallNET.sh&#x27;) -d 11.5 -v 64 -a</span><br></pre></td></tr></table></figure><h2 id="重装为Ubuntu："><a href="#重装为Ubuntu：" class="headerlink" title="重装为Ubuntu："></a>重装为Ubuntu：</h2><p>以下命令中的 -u 后面为Ubuntu版本号，-v 后面为64位&#x2F;32位，可根据需求进行替换。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Ubuntu 12.04 64位：</span></span><br><span class="line">bash &lt;(wget --no-check-certificate -qO- &#x27;https://raw.githubusercontent.com/notetoday/sh/main/InstallNET.sh&#x27;) -u 12.04 -v 64 -a</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Ubuntu 14.04 64位：</span></span><br><span class="line">bash &lt;(wget --no-check-certificate -qO- &#x27;https://raw.githubusercontent.com/notetoday/sh/main/InstallNET.sh&#x27;) -u 14.04 -v 64 -a</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Ubuntu 16.04 64位：</span></span><br><span class="line">bash &lt;(wget --no-check-certificate -qO- &#x27;https://raw.githubusercontent.com/notetoday/sh/main/InstallNET.sh&#x27;) -u 16.04 -v 64 -a</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Ubuntu 18.04 64位：</span></span><br><span class="line">bash &lt;(wget --no-check-certificate -qO- &#x27;https://raw.githubusercontent.com/notetoday/sh/main/InstallNET.sh&#x27;) -u 18.04 -v 64 -a</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Ubuntu 20.04 64位：</span></span><br><span class="line">bash &lt;(wget --no-check-certificate -qO- &#x27;https://raw.githubusercontent.com/notetoday/sh/main/InstallNET.sh&#x27;) -u 20.04 -v 64 -a</span><br></pre></td></tr></table></figure><h2 id="关于系统重装过程"><a href="#关于系统重装过程" class="headerlink" title="关于系统重装过程"></a>关于系统重装过程</h2><hr><p>运行包含正确系统版本号的脚本后，新系统的安装会自动进行，无需人工干预。</p><h2 id="可能的三种情况："><a href="#可能的三种情况：" class="headerlink" title="可能的三种情况："></a>可能的三种情况：</h2><p>正常情况下10分钟左右就可以安装成功了，期间可以在VNC中观察安装过程：<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061444304.png"></p><p>如果安装CentOS 7版本，会出现下图提示，表示不支持：<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061444408.png"><br>如果输入了其它不支持或不存在的系统版本，则会出现下图提示，中止安装：<br><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061444207.png"></p><hr><p>重装系统后更改root密码<br>耐心等待系统安装成功后，出于安全考虑，建议立即更改默认密码。</p><h2 id="具体方法："><a href="#具体方法：" class="headerlink" title="具体方法："></a>具体方法：</h2><p>1、使用Putty以上文提供的默认密码登录，输入以下命令：<strong><code>passwd root</code></strong></p><p>2、接下来会分两次要求输入新的密码，可以手动输入，也可以在其它位置复制一个密码，然后在Putty界面右键点击即可粘贴上去。</p><h2 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h2><p>输入新密码时并不会直接显示出来，光标也不会移动，这是正常的。</p><p>3、再次登录系统时，记得使用新的root密码。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;基本所有的VPS服务器商家，都会提供免费的Linux系统供安装，比如CentOS、Debian、Ubuntu等。那为什么还要使用一键DD脚本重装&amp;#x2F;更换系统呢？&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;商家提供的系统版本有限，可能没有自己需要的版本。&lt;/li&gt;
&lt;li&gt;商家的系统</summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="服务器" scheme="http://blog.yuqi.fun/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>最佳免费NPV方式-workers搭建vless使用</title>
    <link href="http://blog.yuqi.fun/undefined/1b7388f.html"/>
    <id>http://blog.yuqi.fun/undefined/1b7388f.html</id>
    <published>2023-10-26T00:00:00.000Z</published>
    <updated>2023-10-26T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="资源："><a href="#资源：" class="headerlink" title="资源："></a>资源：</h2><h6 id="WIN"><a href="#WIN" class="headerlink" title="WIN:"></a><strong>WIN:</strong></h6><p>v2rayN 最新版<a href="https://github.com/2dust/v2rayN/releases">下载地址&gt;&gt;</a></p><p>cloudflare<a href="https://dash.cloudflare.com/">网站链接&gt;&gt;</a></p><p>临时邮箱：<a href="https://www.linshiyouxiang.net/">https://www.linshiyouxiang.net/</a></p><p>部署代码：<a href="https://github.com/zizifn/edgetunnel/blob/main/src/worker-vless.js">https://github.com/zizifn/edgetunnel/blob/main/src/worker-vless.js</a></p><p>uuid生成：<a href="https://1024tools.com/uuid">https://1024tools.com/uuid</a></p><p>workers win专用ip优选：<a href="https://jdssl.top/wp-content/uploads/2023/07/works%E4%B8%93%E7%94%A8ip%E4%BC%98%E9%80%89.zip">下载地址&gt;&gt;</a></p><p>ip查看：<a href="https://whatismyipaddress.com/">https://whatismyipaddress.com/</a></p><p>cf ip优选；<a href="https://stock.hostmonit.com/CloudFlareYes">https://stock.hostmonit.com/CloudFlareYes</a></p><p>网络测速：<a href="https://www.speedtest.net/result/14952074175">https://www.speedtest.net/result/14952074175</a></p><p>openclash转换订阅网址：<a href="https://sub-web.netlify.app/">https://sub-web.netlify.app/</a></p><h5 id="cdn加速"><a href="#cdn加速" class="headerlink" title="cdn加速"></a>cdn加速</h5><p>cdn-all.xn–b6gac.eu.org<br>cdn.xn–b6gac.eu.org<br>cdn-b100.xn–b6gac.eu.org<br>edgetunnel.anycast.eu.org<br>cdn.anycast.eu.org （亚洲地区）</p><h6 id="MAC"><a href="#MAC" class="headerlink" title="MAC:"></a>MAC:</h6><p>v2rayu: <a href="https://github.com/yanue/V2rayU/releases/tag/v3.8.0">下载链接&gt;&gt;</a></p><h5 id="cloudflarest-ip优化："><a href="#cloudflarest-ip优化：" class="headerlink" title="cloudflarest ip优化："></a>cloudflarest ip优化：</h5><p>mac inter :<a href="https://github.com/XIU2/CloudflareSpeedTest/releases/download/v2.2.4/CloudflareST_darwin_amd64.zip">下载地址&gt;&gt;</a></p><p>mac arm :<a href="https://github.com/XIU2/CloudflareSpeedTest/releases/download/v2.2.4/CloudflareST_darwin_arm64.zip">下载地址&gt;&gt;</a></p><p>cloudflarest ip段：<a href="https://zip.baipiao.eu.org/">下载地址&gt;&gt;</a></p><p>备注：需要自行下载上方CDN IP段否则只能延迟测速。</p><p>终端：</p><p>cd &#x2F;xxxx&#x2F;xxxxx&#x2F;CloudfareST_darwin_amd64</p><p>无法使用以下代码或报错请赋予权限：</p><p>chmod a+x CloudflareST</p><p>若实在无法解决该问题请使用这个网站进行优选ip <em><a href="https://vfarid.github.io/cf-ip-scanner/?max=30">点击优选ip&gt;&gt;</a>)</em></p><p><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061021358.png" alt="img"></a></p><p>普通ip优选</p><p>sudo .&#x2F;CloudflareST</p><p>10 个平均延迟低于 200 ms且下载速度高于3MB&#x2F;s的IP</p><p>sudo .&#x2F;CloudflareST -url <a href="https://jp.cloudflarest.link/">https://jp.cloudflarest.link</a> -tl 200 -sl 3 -dn 10</p><p>sudo .&#x2F;CloudflareST -url <a href="https://hkcs.cloudflarest.link/">https://hkcs.cloudflarest.link</a> -tl 200 -sl 3 -dn 10</p><h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><h3 id="一、注册cloudflare账：https-dash-cloudflare-com-login"><a href="#一、注册cloudflare账：https-dash-cloudflare-com-login" class="headerlink" title="一、注册cloudflare账：https://dash.cloudflare.com/login"></a>一、注册cloudflare账：<a href="https://dash.cloudflare.com/login">https://dash.cloudflare.com/login</a></h3><p>点击Workers 和 Pages，创建Workers</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061022123.png"></p><p>写上备注或者名字</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061022475.png"></p><h3 id="二、代码部署"><a href="#二、代码部署" class="headerlink" title="二、代码部署"></a>二、代码部署</h3><p>复制代码到编辑器：<a href="https://github.com/zizifn/edgetunnel/blob/main/src/worker-vless.js">https://github.com/zizifn/edgetunnel/blob/main/src/worker-vless.js</a></p><p>修改userid–生成：<a href="https://1024tools.com/uuid">https://1024tools.com/uuid</a></p><p>修改proxyip–cdn加速（随便选一个）</p><p>cdn-all.xn–b6gac.eu.org<br>cdn.xn–b6gac.eu.org<br>cdn-b100.xn–b6gac.eu.org<br>edgetunnel.anycast.eu.org<br>cdn.anycast.eu.org （亚洲地区）</p><p>或**(113.64.186.198或者103.200.112.108或者199.15.76.35)**</p><p><strong>通过issues进行proxyip查找：<a href="https://github.com/zizifn/edgetunnel/issues/162">https://github.com/zizifn/edgetunnel/issues/162</a></strong></p><p><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061023400.webp" alt="img"></a></p><h3 id="三、点击部署运行，然后在浏览器输入地址【网站域名-和刚刚修改的uuid】"><a href="#三、点击部署运行，然后在浏览器输入地址【网站域名-和刚刚修改的uuid】" class="headerlink" title="三、点击部署运行，然后在浏览器输入地址【网站域名 &#x2F; 和刚刚修改的uuid】"></a>三、点击部署运行，然后在浏览器输入地址【网站域名 &#x2F; 和刚刚修改的uuid】</h3><p>如noisevless.workers.dev&#x2F;c55-08e2-46fa-9d21-2e6020d9acd9，得到配置信息</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061025196.png"></p><p>复制v2ray显示的信息，然后在v2ray中下拉菜单中选择从粘贴板导入，然后查看服务器列表是否有该地址</p><p><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061026907.webp" alt="img"></a></p><h3 id="四、配置ip优选"><a href="#四、配置ip优选" class="headerlink" title="四、配置ip优选"></a>四、配置ip优选</h3><p>本地拉取ip优选 Github：<a href="https://github.com/XIU2/CloudflareSpeedTest">https://github.com/XIU2/CloudflareSpeedTest</a></p><p>下载：<a href="https://github.com/XIU2/CloudflareSpeedTest/releases">https://github.com/XIU2/CloudflareSpeedTest/releases</a></p><p>国内用户建议从蓝奏云下载：<a href="https://pan.lanzouj.com/b0742hkxe">https://pan.lanzouj.com/b0742hkxe</a></p><p>支持win、Mac、linux【注意：退出所有代理软件】</p><p>提示：MAC 系统下如果遇到提示：open ip.txt: no such file or directory 说明你没有在软件所在目录下运行。</p><p>如果平均延迟非常低（如 0.xx），则说明 CloudflareST 测速时走了代理，请先关闭代理软件后再测速。</p><p>如果在路由器上运行，请先关闭路由器内的代理（或将其排除），否则测速结果可能会不准确&#x2F;无法使用。</p><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p><p>脚本【cfst_host.sh】的作用是 CloudflareST 测速后获取最快 IP 并替换 Hosts 中的 Cloudflare CDN IP。</p><p>使用前请先阅读：<a href="https://github.com/XIU2/CloudflareSpeedTest/discussions/312#discussioncomment-5161577">https://github.com/XIU2/CloudflareSpeedTest/discussions/312#discussioncomment-5161577</a></p><p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p><p>ip.txt 为 IPv4 数据文件<br>ipv6.txt 为 IPv6 数据文件</p><p>可以使用 -f xx.txt 参数来指定不同的 IP 数据文件（支持 IPv4 + IPv6 混合测速），如：<br>.&#x2F;CloudflareST -f ipv6.txt</p><p>也可以直接通过参数指定要测速的 IP，如：<br>.&#x2F;CloudflareST -ip 1.1.1.1,2606:4700::&#x2F;32</p><p>Mac：终端：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /xxxx/xxxxx/CloudfareST\_darwin\_amd64</span><br></pre></td></tr></table></figure><p>无法使用以下代码或报错请赋予权限：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod a+x CloudflareST</span><br></pre></td></tr></table></figure><p>然后运行 <code>sudo ./CloudflareST</code></p><p><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061026875.jpeg" alt="img"></a></p><h3 id="五、v2rayu软件设置"><a href="#五、v2rayu软件设置" class="headerlink" title="五、v2rayu软件设置"></a>五、v2rayu软件设置</h3><h2 id="不设置自定义域名解析（没tls加密，80或者2052端口）："><a href="#不设置自定义域名解析（没tls加密，80或者2052端口）：" class="headerlink" title="不设置自定义域名解析（没tls加密，80或者2052端口）："></a>不设置自定义域名解析（没tls加密，80或者2052端口）：</h2><p>选择延迟最低的ip地址填入v2rayu设置中，<strong>注意：v2ray,shadowrocket等客户端要去掉tls加密，端口改为80或者2052，地址修为优选 ip，host为你部署works的地址</strong></p><p><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061026600.webp" alt="img"></a></p><p>点击on开启v2rayu，选择全局模式即可</p><p>win端选择优选服务器后开启活动服务器</p><p><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061026578.webp" alt="img"></a></p><p><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061026372.webp" alt="img"></a></p><h2 id="有域名（有tls加密，443端口-："><a href="#有域名（有tls加密，443端口-：" class="headerlink" title="有域名（有tls加密，443端口)："></a>有域名（有tls加密，443端口)：</h2><p>works配置域名：在触发器中添加自定义域名，然后在二级域名后加&#x2F;UUID，就能看到VLESS节点URL和Clash-meta配置<br>在v2rayN导入URL，地址栏改为优选ip，secrurity为pls，端口配置443，host为解析的域名地址，</p><p><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061026359.webp" alt="img"></a></p><p>确认之后就生成v2ray和clash-meta节点配置信息</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061027942.png"></p><p><strong>3大运营商优选IP，根据自身运营商选择延迟最低IP</strong> <a href="https://stock.hostmonit.com/CloudFlareYes">点击直达</a></p><p>再按照上面介绍的正确填写信息即可，别名地址都是我们自定义后的域名</p><p><a href=""><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061027451.webp" alt="img"></a></p><h2 id="附加"><a href="#附加" class="headerlink" title="附加"></a>附加</h2><p>v2ray的正确信息修改</p><p>1、修改地址,改成自己运营商的优选IP</p><p>2、端口修改为2052或者80</p><p>3、关闭tls</p><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061028951.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PLAINTEXT</span><br><span class="line">clash-meta的正确信息修改</span><br></pre></td></tr></table></figure><p><img src="https://pan.yuqi.fun/d/%E5%A4%A9%E7%BF%BC%E4%BA%91%E7%9B%98/img/202311061029359.png"></p><p>如果有域名的：<br>只需要替换优选ip，然后sni和host检查时自己的域名哦</p><p>**speedtest測速-**<a href="https://www.speedtest.net/">https://www.speedtest.net/</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;资源：&quot;&gt;&lt;a href=&quot;#资源：&quot; class=&quot;headerlink&quot; title=&quot;资源：&quot;&gt;&lt;/a&gt;资源：&lt;/h2&gt;&lt;h6 id=&quot;WIN&quot;&gt;&lt;a href=&quot;#WIN&quot; class=&quot;headerlink&quot; title=&quot;WIN:&quot;&gt;&lt;/a&gt;&lt;stro</summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="NPV" scheme="http://blog.yuqi.fun/tags/NPV/"/>
    
  </entry>
  
  <entry>
    <title>hysteria2与reality共存安装</title>
    <link href="http://blog.yuqi.fun/undefined/756577dc.html"/>
    <id>http://blog.yuqi.fun/undefined/756577dc.html</id>
    <published>2023-10-06T00:00:00.000Z</published>
    <updated>2023-10-06T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>1.目前伪装最好的两种协议，一个代表tcp协议（reality）的目前巅峰，一个新型UDP协议（hysteria2）的宠儿。<br>2.这次用的sing-box搭建 <a href="https://sing-box.sagernet.org/zh">https://sing-box.sagernet.org/zh</a> 因为简单。之前一直用八合一，最大的问题就是各种伪装后，机器就只能拿来科学上网了，因为安装Nginx，搭建个网页啥的都很麻烦。<br>3.教程亮点，无需自备域名。<br>3.passwall发现没有类似的设置教程，所以出一个。</p><h1 id="安装sing-box"><a href="#安装sing-box" class="headerlink" title="安装sing-box"></a>安装sing-box</h1><p>直接安装预发布版（支持hysteria2）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -c &quot;$(curl -L https://sing-box.vercel.app)&quot; @ install --beta</span><br></pre></td></tr></table></figure><p>如何需要卸载</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -c &quot;$(curl -L https://sing-box.vercel.app)&quot; @ remove</span><br></pre></td></tr></table></figure><p>等会用得到的指令<br>重启</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sing-box</span><br></pre></td></tr></table></figure><p>状态</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status sing-box</span><br></pre></td></tr></table></figure><p>实时日志</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -u sing-box -o cat -f</span><br></pre></td></tr></table></figure><h1 id="服务端vps搭建"><a href="#服务端vps搭建" class="headerlink" title="服务端vps搭建"></a>服务端vps搭建</h1><p><strong>自签证书申请，这里申请的是bing.com，申请了10年，可以用到你vps商家跑路了</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /etc/hysteria &amp;&amp; openssl ecparam -genkey -name prime256v1 -out /etc/hysteria/private.key &amp;&amp; openssl req -new -x509 -days 3650 -key /etc/hysteria/private.key -out /etc/hysteria/cert.pem -subj &quot;/CN=bing.com&quot;</span><br></pre></td></tr></table></figure><p><strong>搭建组合选择</strong><br>参考网站 <a href="https://github.com/chika0801/sing-box-examples">https://github.com/chika0801/sing-box-examples</a> 后期可以根据需求自由组合<br>为什么选择reality和hysteria2<br>1.reality目前是TCP协议里面号称最安全的<br>2.hysteria2作者是最用心的，教程写得很清楚 <a href="https://v2.hysteria.network/zh/">https://v2.hysteria.network/zh/</a><br>开始<br>编辑confing文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /usr/local/etc/sing-box/config.json</span><br></pre></td></tr></table></figure><p>按照以下修改</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;inbounds&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;type&quot;: &quot;hysteria2&quot;,</span><br><span class="line">            &quot;listen&quot;: &quot;::&quot;,</span><br><span class="line">            &quot;listen_port&quot;: 8443,</span><br><span class="line">            &quot;users&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;password&quot;: &quot;&quot; //你的密码</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            &quot;masquerade&quot;: &quot;https://bing.com&quot;,</span><br><span class="line">            &quot;tls&quot;: &#123;</span><br><span class="line">                &quot;enabled&quot;: true,</span><br><span class="line">                &quot;alpn&quot;: [</span><br><span class="line">                    &quot;h3&quot;</span><br><span class="line">                ],</span><br><span class="line">                &quot;certificate_path&quot;: &quot;/etc/hysteria/cert.pem&quot;,</span><br><span class="line">                &quot;key_path&quot;: &quot;/etc/hysteria/private.key&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;type&quot;: &quot;vless&quot;,</span><br><span class="line">            &quot;listen&quot;: &quot;::&quot;,</span><br><span class="line">            &quot;listen_port&quot;: 443,</span><br><span class="line">            &quot;users&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;uuid&quot;: &quot;&quot;, //vps上执行sing-box generate uuid</span><br><span class="line">                    &quot;flow&quot;: &quot;xtls-rprx-vision&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            &quot;tls&quot;: &#123;</span><br><span class="line">                &quot;enabled&quot;: true,</span><br><span class="line">                &quot;server_name&quot;: &quot;www.tesla.com&quot;,</span><br><span class="line">                &quot;reality&quot;: &#123;</span><br><span class="line">                    &quot;enabled&quot;: true,</span><br><span class="line">                    &quot;handshake&quot;: &#123;</span><br><span class="line">                        &quot;server&quot;: &quot;www.tesla.com&quot;,</span><br><span class="line">                        &quot;server_port&quot;: 443</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &quot;private_key&quot;: &quot;&quot;, //vps上执行sing-box generate reality-keypair</span><br><span class="line">                    &quot;short_id&quot;: [</span><br><span class="line">                        &quot;0123456789abcdef&quot;// 0到f，长度为2的倍数，长度上限为16，默认这个也可以</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;outbounds&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;type&quot;: &quot;direct&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后重启</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sing-box</span><br></pre></td></tr></table></figure><p>再查看日志</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl -u sing-box -o cat -f</span><br></pre></td></tr></table></figure><p>没问题就OK拉，开始导入passwall了因为申请的是自签证书，所有设置，都是<strong>开启允许不安全连接</strong></p><h1 id="hysteria2客户端配置文件"><a href="#hysteria2客户端配置文件" class="headerlink" title="hysteria2客户端配置文件"></a>hysteria2客户端配置文件</h1><h2 id="客户端配置文件"><a href="#客户端配置文件" class="headerlink" title="客户端配置文件"></a>客户端配置文件</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span> <span class="string">ip:443</span></span><br><span class="line"><span class="attr">auth:</span> <span class="number">123456</span></span><br><span class="line"></span><br><span class="line"><span class="attr">bandwidth:</span></span><br><span class="line">  <span class="attr">up:</span> <span class="number">20</span> <span class="string">mbps</span></span><br><span class="line">  <span class="attr">down:</span> <span class="number">100</span> <span class="string">mbps</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">tls:</span></span><br><span class="line">  <span class="attr">sni:</span> <span class="string">a.com</span></span><br><span class="line">  <span class="attr">insecure:</span> <span class="literal">false</span> <span class="comment">#使用自签域名时需要改成true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">socks5:</span></span><br><span class="line">  <span class="attr">listen:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:1080</span></span><br><span class="line"><span class="attr">http:</span></span><br><span class="line">  <span class="attr">listen:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8080</span></span><br></pre></td></tr></table></figure><h2 id="sing-box配置文件-Android-IOS"><a href="#sing-box配置文件-Android-IOS" class="headerlink" title="sing-box配置文件(Android&#x2F;IOS)"></a>sing-box配置文件(Android&#x2F;IOS)</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;dns&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;servers&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cf&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://1.1.1.1/dns-query&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;local&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;223.5.5.5&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;detour&quot;</span><span class="punctuation">:</span> <span class="string">&quot;direct&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;block&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rcode://success&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;geosite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;category-ads-all&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;block&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;disable_cache&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;outbound&quot;</span><span class="punctuation">:</span> <span class="string">&quot;any&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;local&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;geosite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;local&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;strategy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ipv4_only&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;inbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tun&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;inet4_address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;172.19.0.1/30&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;auto_route&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;strict_route&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;sniff&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;outbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hysteria2&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;proxy&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;这里填ip&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;server_port&quot;</span><span class="punctuation">:</span> <span class="number">443</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;up_mbps&quot;</span><span class="punctuation">:</span> <span class="number">20</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;down_mbps&quot;</span><span class="punctuation">:</span> <span class="number">100</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;这里填密码&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;tls&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;enabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;server_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;a.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;insecure&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;direct&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;direct&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;block&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;block&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dns&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dns-out&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;route&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;rules&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;protocol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dns&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;outbound&quot;</span><span class="punctuation">:</span> <span class="string">&quot;dns-out&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;geosite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;geoip&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">          <span class="string">&quot;private&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="string">&quot;cn&quot;</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;outbound&quot;</span><span class="punctuation">:</span> <span class="string">&quot;direct&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;geosite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;category-ads-all&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;outbound&quot;</span><span class="punctuation">:</span> <span class="string">&quot;block&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;auto_detect_interface&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h1 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h1><h2 id="客户端下载"><a href="#客户端下载" class="headerlink" title="客户端下载"></a>客户端下载</h2><p>v2rayN 下载：<a href="https://bulianglin.com/g/aHR0cHM6Ly9naXRodWIuY29tLzJkdXN0L3YycmF5Ti9yZWxlYXNlcy9sYXRlc3Q">https://github.com/2dust/v2rayN/releases/latest</a><br>Hysteria 2下载：<a href="https://bulianglin.com/g/aHR0cHM6Ly9naXRodWIuY29tL2FwZXJuZXQvaHlzdGVyaWEvcmVsZWFzZXM">https://github.com/apernet/hysteria/releases</a><br>Hysteria 2文档：<a href="https://bulianglin.com/g/aHR0cHM6Ly92Mi5oeXN0ZXJpYS5uZXR3b3JrL3poLw">https://v2.hysteria.network/zh/</a><br>sing-box文档：<a href="https://bulianglin.com/g/aHR0cHM6Ly9zaW5nLWJveC5zYWdlcm5ldC5vcmcvemgv">https://sing-box.sagernet.org/zh/</a><br>Android客户端（SFA）：<a href="https://bulianglin.com/g/aHR0cHM6Ly9pbnN0YWxsLmFwcGNlbnRlci5tcy91c2Vycy9uZWtvaGFzZWthaS9hcHBzL3NmYS9kaXN0cmlidXRpb25fZ3JvdXBzL3B1YmxpY3Rlc3Q">https://install.appcenter.ms/users/nekohasekai/apps/sfa/distribution_groups&#x2F;publictest</a><br>IOS客户端（TestFlight）：<a href="https://bulianglin.com/g/aHR0cHM6Ly90ZXN0ZmxpZ2h0LmFwcGxlLmNvbS9qb2luL0FjcU80NEZI">https://testflight.apple.com/join/AcqO44FH</a> （1.5.0 beta版支持Hysteria 2）<br>IOS客户端（AppStore）：<a href="https://bulianglin.com/g/aHR0cHM6Ly9hcHBzLmFwcGxlLmNvbS91cy9hcHAvc2luZy1ib3gvaWQ2NDUxMjcyNjcz">https://apps.apple.com/us/app/sing-box/id6451272673</a> （暂不支持Hysteria 2）</p><h2 id="视频教程参考"><a href="#视频教程参考" class="headerlink" title="视频教程参考"></a>视频教程参考</h2><p>2023年最安全协议hysteria2和reality同时搭建 | 无需自备域名 | passwall设置hysteria2方法：<a href="https://youtu.be/S0jSGOdeTs4?si=w4vYPa44zIoQ4zHv">https://youtu.be/S0jSGOdeTs4?si=w4vYPa44zIoQ4zHv</a></p><p>【遥遥领先】黑科技！垃圾VPS线路网速大幅提升！第二代hysteria节点搭建教程，歇斯底里为什么可以提升网速？windows&#x2F;ios&#x2F;android手机移动端使用方式，sing-box配置hy2方式：<a href="https://youtu.be/CXj-ID33MhU?si=bgcrlIpW5BwOc9uL">https://youtu.be/CXj-ID33MhU?si=bgcrlIpW5BwOc9uL</a></p><h2 id="文档参考"><a href="#文档参考" class="headerlink" title="文档参考"></a>文档参考</h2><p>视频1：<a href="https://ybfl.xyz/sites/283.html">https://ybfl.xyz/sites/283.html</a></p><p>视频2：<a href="https://bulianglin.com/archives/hysteria2.html">https://bulianglin.com/archives/hysteria2.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;1.目前伪装最好的两种协议，一个代表tcp协议（reality）的目前巅峰，一个新型UDP协议（hysteria2）的宠儿。&lt;br&gt;2.这次</summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="服务器" scheme="http://blog.yuqi.fun/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>MT7981B安博通ABT_ASR3000刷机指南</title>
    <link href="http://blog.yuqi.fun/undefined/2c4b11e5.html"/>
    <id>http://blog.yuqi.fun/undefined/2c4b11e5.html</id>
    <published>2023-09-28T00:00:00.000Z</published>
    <updated>2023-09-28T00:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="刷机方法"><a href="#刷机方法" class="headerlink" title="刷机方法"></a>刷机方法</h1><h2 id="一："><a href="#一：" class="headerlink" title="一："></a>一：</h2><p>下载附件e-202306161250-cfg.tar.gz，原厂系统：系统工具&#x3D;&gt;配置管理&#x3D;&gt;导入配置，重启；</p><h2 id="二："><a href="#二：" class="headerlink" title="二："></a>二：</h2><p>开机后原来的wifi密码和后台密码不变，进入系统提示root无密码，不要搭理，<strong>系统工具&#x3D;&gt;重启&#x3D;&gt;立即重启</strong>；</p><h2 id="三："><a href="#三：" class="headerlink" title="三："></a>三：</h2><p>重启后已开启telnet,使用putty或其它工具登录telnet，用户名root，无密码；</p><h2 id="四："><a href="#四：" class="headerlink" title="四："></a>四：</h2><p>路由器联网，逐条运行以下命令开启SSH：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">echo arch aarch64_cortex-a53 300 &gt;&gt; /etc/opkg.conf</span><br><span class="line">cd /tmp</span><br><span class="line">wget https://downloads.openwrt.org/releases/packages-19.07/aarch64_cortex-a53/base/dropbear_2019.78-2_aarch64_cortex-a53.ipk</span><br><span class="line">opkg install ./dropbear_2019.78-2_aarch64_cortex-a53.ipk -f /etc/opkg.conf --force-depends</span><br><span class="line">/etc/init.d/dropbear enable</span><br><span class="line">/etc/init.d/dropbear start</span><br></pre></td></tr></table></figure><h2 id="五："><a href="#五：" class="headerlink" title="五："></a>五：</h2><p>winscp连接路由器，putty里逐条运行以下命令备份原厂固件（注意：mtd0备份之后应立即下载到本地并删除路由器里的文件，然后再继续备份mtd1-8，否则会爆内存重启）：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">dd if=/dev/mtd0 | gzip &gt;/tmp/mtd0_spi0.0.bin.gz</span><br><span class="line">dd if=/dev/mtd1 of=/tmp/mtd1_BL2.bin</span><br><span class="line">dd if=/dev/mtd2 of=/tmp/mtd2_u-boot-env.bin</span><br><span class="line">dd if=/dev/mtd3 of=/tmp/mtd3_art.bin</span><br><span class="line">dd if=/dev/mtd4 of=/tmp/mtd4_Factory.bin</span><br><span class="line">dd if=/dev/mtd5 of=/tmp/mtd5_FIP.bin</span><br><span class="line">dd if=/dev/mtd6 of=/tmp/mtd6_ubi.bin</span><br><span class="line">dd if=/dev/mtd7 of=/tmp/mtd7_ubi_backup.bin</span><br><span class="line">dd if=/dev/mtd8 of=/tmp/mtd8_Config_backup.bin</span><br></pre></td></tr></table></figure><h2 id="六："><a href="#六：" class="headerlink" title="六："></a>六：</h2><p>winscp进入路由器tmp文件夹，上传uboot：mt7981_abt-asr3000-fip-fixed-parts.bin，逐条运行以下命令刷入大分区uboot：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd /tmp</span><br><span class="line">md5sum mt7981_abt-asr3000-fip-fixed-parts.bin</span><br><span class="line">mtd write mt7981_abt-asr3000-fip-fixed-parts.bin FIP</span><br><span class="line">mtd verify mt7981_abt-asr3000-fip-fixed-parts.bin FIP</span><br></pre></td></tr></table></figure><p>看到结果显示success后拔电</p><p>当然也可以不校验MD5直接刷：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /tmp</span><br><span class="line">mtd write mt7981_abt-asr3000-fip-fixed-parts.bin FIP</span><br></pre></td></tr></table></figure><h2 id="七："><a href="#七：" class="headerlink" title="七："></a>七：</h2><p><strong>按住路由器MESH键插电</strong>，电脑网卡设置IP：192.168.1.100，网线插路由器LAN口，登录192.168.1.1进入uboot webui，刷入asr3000-squashfs-factory.bin，重启；wifi密码：无；后台192.168.1.1，密码：password</p><h1 id="附件"><a href="#附件" class="headerlink" title="附件"></a>附件</h1><h2 id="固件及原厂dts如下："><a href="#固件及原厂dts如下：" class="headerlink" title="固件及原厂dts如下："></a>固件及原厂dts如下：</h2><p><a href="https://cloud.189.cn/t/U7rqaqmINJ3e">https://cloud.189.cn/t/U7rqaqmINJ3e</a> （访问码：4snw）</p><h1 id="转载于恩山无线论坛"><a href="#转载于恩山无线论坛" class="headerlink" title="转载于恩山无线论坛"></a>转载于恩山无线论坛</h1><p><a href="https://www.right.com.cn/forum/thread-8302537-1-1.html">https://www.right.com.cn/forum/thread-8302537-1-1.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;刷机方法&quot;&gt;&lt;a href=&quot;#刷机方法&quot; class=&quot;headerlink&quot; title=&quot;刷机方法&quot;&gt;&lt;/a&gt;刷机方法&lt;/h1&gt;&lt;h2 id=&quot;一：&quot;&gt;&lt;a href=&quot;#一：&quot; class=&quot;headerlink&quot; title=&quot;一：&quot;&gt;&lt;/a&gt;一：&lt;/h</summary>
      
    
    
    
    <category term="教程" scheme="http://blog.yuqi.fun/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="路由器" scheme="http://blog.yuqi.fun/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/"/>
    
  </entry>
  
</feed>
